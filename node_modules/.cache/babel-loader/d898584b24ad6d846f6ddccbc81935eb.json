{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useCallback } from 'react';\nimport clsx from 'clsx';\nimport styles from './styles.css.js';\nimport InternalBox from '../../box/internal';\nimport { InternalButton } from '../../button/internal';\nimport InternalSpaceBetween from '../../space-between/internal';\nimport PopoverContainer from '../../popover/container';\nimport PopoverBody from '../../popover/body';\nimport InternalAlert from '../../alert/internal';\nimport { scrollElementIntoView } from '../../internal/utils/scrollable-containers';\n\nvar arrow = function (position) {\n  return React.createElement(\"div\", {\n    className: clsx(styles.arrow, styles[\"arrow-position-\".concat(position)])\n  }, React.createElement(\"div\", {\n    className: styles['arrow-outer']\n  }), React.createElement(\"div\", {\n    className: styles['arrow-inner']\n  }));\n};\n\nexport function AnnotationPopover(_a) {\n  var title = _a.title,\n      content = _a.content,\n      alert = _a.alert,\n      _b = _a.direction,\n      direction = _b === void 0 ? 'top' : _b,\n      taskLocalStepIndex = _a.taskLocalStepIndex,\n      totalLocalSteps = _a.totalLocalSteps,\n      showPreviousButton = _a.showPreviousButton,\n      showFinishButton = _a.showFinishButton,\n      onDismiss = _a.onDismiss,\n      nextButtonEnabled = _a.nextButtonEnabled,\n      onNextButtonClick = _a.onNextButtonClick,\n      onFinish = _a.onFinish,\n      trackRef = _a.trackRef,\n      previousButtonEnabled = _a.previousButtonEnabled,\n      onPreviousButtonClick = _a.onPreviousButtonClick,\n      i18nStrings = _a.i18nStrings;\n  var dismissButtonRefCallback = useCallback(function (element) {\n    var _a;\n\n    if (element) {\n      element.focus({\n        preventScroll: true\n      }); // Falls back to alignTop on IE11\n\n      scrollElementIntoView((_a = trackRef.current) !== null && _a !== void 0 ? _a : undefined);\n    }\n  }, [trackRef]);\n  return React.createElement(PopoverContainer, {\n    position: direction,\n    trackRef: trackRef,\n    trackKey: taskLocalStepIndex,\n    arrow: arrow,\n    zIndex: 1000\n  }, React.createElement(PopoverBody, {\n    size: \"medium\",\n    fixedWidth: false,\n    dismissButton: true,\n    dismissAriaLabel: i18nStrings.labelDismissAnnotation,\n    header: React.createElement(InternalBox, {\n      color: \"text-body-secondary\",\n      fontSize: \"body-s\",\n      margin: {\n        top: 'xxxs'\n      },\n      className: styles.header\n    }, title),\n    onDismiss: onDismiss,\n    className: styles.annotation,\n    variant: \"annotation\",\n    overflowVisible: \"content\",\n    dismissButtonRef: dismissButtonRefCallback\n  }, React.createElement(InternalSpaceBetween, {\n    size: \"s\"\n  }, React.createElement(\"div\", {\n    className: styles.description\n  }, React.createElement(InternalBox, {\n    className: styles.content\n  }, content)), alert && React.createElement(InternalAlert, {\n    type: \"warning\"\n  }, alert), React.createElement(InternalSpaceBetween, {\n    size: \"s\"\n  }, React.createElement(\"div\", {\n    className: styles.divider\n  }), React.createElement(\"div\", {\n    className: styles.actionBar\n  }, React.createElement(\"div\", {\n    className: styles.stepCounter\n  }, React.createElement(InternalBox, {\n    className: styles['step-counter-content'],\n    color: \"text-body-secondary\",\n    fontSize: \"body-s\"\n  }, i18nStrings.stepCounterText(taskLocalStepIndex !== null && taskLocalStepIndex !== void 0 ? taskLocalStepIndex : 0, totalLocalSteps !== null && totalLocalSteps !== void 0 ? totalLocalSteps : 0))), React.createElement(InternalSpaceBetween, {\n    size: \"xs\",\n    direction: \"horizontal\"\n  }, showPreviousButton && React.createElement(InternalButton, {\n    variant: \"link\",\n    onClick: onPreviousButtonClick,\n    disabled: !previousButtonEnabled,\n    formAction: \"none\",\n    ariaLabel: i18nStrings.previousButtonText,\n    className: styles['previous-button']\n  }, i18nStrings.previousButtonText), showFinishButton ? React.createElement(InternalButton, {\n    onClick: onFinish,\n    formAction: \"none\",\n    ariaLabel: i18nStrings.finishButtonText,\n    className: styles['finish-button']\n  }, i18nStrings.finishButtonText) : React.createElement(InternalButton, {\n    onClick: onNextButtonClick,\n    disabled: !nextButtonEnabled,\n    formAction: \"none\",\n    ariaLabel: i18nStrings.nextButtonText,\n    className: styles['next-button']\n  }, i18nStrings.nextButtonText)))))));\n}","map":{"version":3,"mappings":"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","names":["React","useCallback","clsx","styles","InternalBox","InternalButton","InternalSpaceBetween","PopoverContainer","PopoverBody","InternalAlert","scrollElementIntoView","arrow","position","className","AnnotationPopover","_a","title","content","alert","_b","direction","taskLocalStepIndex","totalLocalSteps","showPreviousButton","showFinishButton","onDismiss","nextButtonEnabled","onNextButtonClick","onFinish","trackRef","previousButtonEnabled","onPreviousButtonClick","i18nStrings","dismissButtonRefCallback","element","focus","preventScroll","current","undefined","trackKey","zIndex","size","fixedWidth","dismissButton","dismissAriaLabel","labelDismissAnnotation","header","color","fontSize","margin","top","annotation","variant","overflowVisible","dismissButtonRef","description","type","divider","actionBar","stepCounter","stepCounterText","onClick","disabled","formAction","ariaLabel","previousButtonText","finishButtonText","nextButtonText"],"sourceRoot":"","sources":["../../../../src/annotation-context/annotation/annotation-popover.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useCallback } from 'react';\nimport clsx from 'clsx';\nimport styles from './styles.css.js';\nimport InternalBox from '../../box/internal';\nimport { ButtonProps } from '../../button/interfaces';\nimport { InternalButton } from '../../button/internal';\nimport InternalSpaceBetween from '../../space-between/internal';\nimport PopoverContainer from '../../popover/container';\nimport PopoverBody from '../../popover/body';\nimport { HotspotProps } from '../../hotspot/interfaces';\nimport { AnnotationContextProps } from '../interfaces';\nimport InternalAlert from '../../alert/internal';\nimport { InternalPosition } from '../../popover/interfaces';\nimport { scrollElementIntoView } from '../../internal/utils/scrollable-containers';\n\nexport interface AnnotationPopoverProps {\n  title: string;\n  content: React.ReactNode;\n  alert: React.ReactNode;\n\n  direction: HotspotProps['direction'];\n\n  nextButtonEnabled: boolean;\n  onNextButtonClick: () => void;\n\n  onFinish: () => void;\n\n  showPreviousButton: boolean;\n  previousButtonEnabled: boolean;\n  onPreviousButtonClick: () => void;\n\n  taskLocalStepIndex: number;\n\n  totalLocalSteps: number;\n\n  showFinishButton: boolean;\n\n  onDismiss: () => void;\n\n  trackRef: React.RefObject<HTMLElement>;\n\n  i18nStrings: AnnotationContextProps['i18nStrings'];\n}\n\nconst arrow = (position: InternalPosition | null) => (\n  <div className={clsx(styles.arrow, styles[`arrow-position-${position}`])}>\n    <div className={styles['arrow-outer']} />\n    <div className={styles['arrow-inner']} />\n  </div>\n);\n\nexport function AnnotationPopover({\n  title,\n  content,\n  alert,\n\n  direction = 'top',\n\n  taskLocalStepIndex,\n\n  totalLocalSteps,\n\n  showPreviousButton,\n  showFinishButton,\n\n  onDismiss,\n\n  nextButtonEnabled,\n  onNextButtonClick,\n\n  onFinish,\n\n  trackRef,\n\n  previousButtonEnabled,\n  onPreviousButtonClick,\n  i18nStrings,\n}: AnnotationPopoverProps) {\n  const dismissButtonRefCallback = useCallback(\n    (element: ButtonProps.Ref) => {\n      if (element) {\n        element.focus({ preventScroll: true });\n        // Falls back to alignTop on IE11\n        scrollElementIntoView(trackRef.current ?? undefined);\n      }\n    },\n    [trackRef]\n  );\n\n  return (\n    <PopoverContainer\n      position={direction}\n      trackRef={trackRef}\n      trackKey={taskLocalStepIndex}\n      arrow={arrow}\n      zIndex={1000}\n    >\n      <PopoverBody\n        size=\"medium\"\n        fixedWidth={false}\n        dismissButton={true}\n        dismissAriaLabel={i18nStrings.labelDismissAnnotation}\n        header={\n          <InternalBox color=\"text-body-secondary\" fontSize=\"body-s\" margin={{ top: 'xxxs' }} className={styles.header}>\n            {title}\n          </InternalBox>\n        }\n        onDismiss={onDismiss}\n        className={styles.annotation}\n        variant=\"annotation\"\n        overflowVisible=\"content\"\n        dismissButtonRef={dismissButtonRefCallback}\n      >\n        <InternalSpaceBetween size=\"s\">\n          <div className={styles.description}>\n            <InternalBox className={styles.content}>{content}</InternalBox>\n          </div>\n\n          {alert && <InternalAlert type=\"warning\">{alert}</InternalAlert>}\n\n          <InternalSpaceBetween size=\"s\">\n            <div className={styles.divider} />\n\n            <div className={styles.actionBar}>\n              <div className={styles.stepCounter}>\n                <InternalBox className={styles['step-counter-content']} color=\"text-body-secondary\" fontSize=\"body-s\">\n                  {i18nStrings.stepCounterText(taskLocalStepIndex ?? 0, totalLocalSteps ?? 0)}\n                </InternalBox>\n              </div>\n              <InternalSpaceBetween size=\"xs\" direction=\"horizontal\">\n                {showPreviousButton && (\n                  <InternalButton\n                    variant=\"link\"\n                    onClick={onPreviousButtonClick}\n                    disabled={!previousButtonEnabled}\n                    formAction=\"none\"\n                    ariaLabel={i18nStrings.previousButtonText}\n                    className={styles['previous-button']}\n                  >\n                    {i18nStrings.previousButtonText}\n                  </InternalButton>\n                )}\n\n                {showFinishButton ? (\n                  <InternalButton\n                    onClick={onFinish}\n                    formAction=\"none\"\n                    ariaLabel={i18nStrings.finishButtonText}\n                    className={styles['finish-button']}\n                  >\n                    {i18nStrings.finishButtonText}\n                  </InternalButton>\n                ) : (\n                  <InternalButton\n                    onClick={onNextButtonClick}\n                    disabled={!nextButtonEnabled}\n                    formAction=\"none\"\n                    ariaLabel={i18nStrings.nextButtonText}\n                    className={styles['next-button']}\n                  >\n                    {i18nStrings.nextButtonText}\n                  </InternalButton>\n                )}\n              </InternalSpaceBetween>\n            </div>\n          </InternalSpaceBetween>\n        </InternalSpaceBetween>\n      </PopoverBody>\n    </PopoverContainer>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}