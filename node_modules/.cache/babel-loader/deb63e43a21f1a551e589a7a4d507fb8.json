{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { fixupFalsyValues } from './operations/property-filter.js';\nexport function collectionReducer(state, action) {\n  var newState = __assign({}, state);\n\n  switch (action.type) {\n    case 'selection':\n      newState.selectedItems = action.selectedItems;\n      break;\n\n    case 'filtering':\n      newState.currentPageIndex = 1;\n      newState.filteringText = action.filteringText;\n      break;\n\n    case 'sorting':\n      newState.currentPageIndex = 1;\n      newState.sortingState = action.sortingState;\n      break;\n\n    case 'pagination':\n      newState.currentPageIndex = action.pageIndex;\n      break;\n\n    case 'property-filtering':\n      newState.currentPageIndex = 1;\n      newState.propertyFilteringQuery = action.query;\n      break;\n  }\n\n  return newState;\n}\nexport function createActions(_a) {\n  var dispatch = _a.dispatch,\n      collectionRef = _a.collectionRef;\n  return {\n    setFiltering: function (filteringText) {\n      dispatch({\n        type: 'filtering',\n        filteringText: filteringText\n      });\n      collectionRef.current && collectionRef.current.scrollToTop();\n    },\n    setSorting: function (state) {\n      dispatch({\n        type: 'sorting',\n        sortingState: state\n      });\n      collectionRef.current && collectionRef.current.scrollToTop();\n    },\n    setCurrentPage: function (pageIndex) {\n      dispatch({\n        type: 'pagination',\n        pageIndex: pageIndex\n      });\n      collectionRef.current && collectionRef.current.scrollToTop();\n    },\n    setSelectedItems: function (selectedItems) {\n      dispatch({\n        type: 'selection',\n        selectedItems: selectedItems\n      });\n    },\n    setPropertyFiltering: function (query) {\n      dispatch({\n        type: 'property-filtering',\n        query: query\n      });\n      collectionRef.current && collectionRef.current.scrollToTop();\n    }\n  };\n}\nexport function createSyncProps(options, _a, actions, collectionRef, _b) {\n  var _c;\n\n  var filteringText = _a.filteringText,\n      sortingState = _a.sortingState,\n      selectedItems = _a.selectedItems,\n      currentPageIndex = _a.currentPageIndex,\n      propertyFilteringQuery = _a.propertyFilteringQuery;\n  var pagesCount = _b.pagesCount,\n      actualPageIndex = _b.actualPageIndex,\n      allItems = _b.allItems;\n  var empty = options.filtering ? allItems.length ? options.filtering.noMatch : options.filtering.empty : null;\n  empty = options.propertyFiltering ? allItems.length ? options.propertyFiltering.noMatch : options.propertyFiltering.empty : empty;\n  var filteringOptions = options.propertyFiltering ? options.propertyFiltering.filteringProperties.reduce(function (acc, property) {\n    Object.keys(allItems.reduce(function (acc, item) {\n      acc['' + fixupFalsyValues(item[property.key])] = true;\n      return acc;\n    }, {})).forEach(function (value) {\n      if (value !== '') {\n        acc.push({\n          propertyKey: property.key,\n          value: value\n        });\n      }\n    });\n    return acc;\n  }, []) : [];\n  return {\n    collectionProps: __assign(__assign(__assign({\n      empty: empty\n    }, options.sorting ? {\n      onSortingChange: function (_a) {\n        var detail = _a.detail;\n        actions.setSorting(detail);\n      },\n      sortingColumn: sortingState === null || sortingState === void 0 ? void 0 : sortingState.sortingColumn,\n      sortingDescending: sortingState === null || sortingState === void 0 ? void 0 : sortingState.isDescending\n    } : {}), options.selection ? {\n      onSelectionChange: function (_a) {\n        var selectedItems = _a.detail.selectedItems;\n        actions.setSelectedItems(selectedItems);\n      },\n      selectedItems: selectedItems,\n      trackBy: options.selection.trackBy\n    } : {}), {\n      ref: collectionRef\n    }),\n    filterProps: {\n      filteringText: filteringText,\n      onChange: function (_a) {\n        var filteringText = _a.detail.filteringText;\n        actions.setFiltering(filteringText);\n      }\n    },\n    propertyFilterProps: {\n      query: propertyFilteringQuery,\n      onChange: function (_a) {\n        var query = _a.detail;\n        actions.setPropertyFiltering(query);\n      },\n      filteringProperties: ((_c = options.propertyFiltering) === null || _c === void 0 ? void 0 : _c.filteringProperties) || [],\n      filteringOptions: filteringOptions\n    },\n    paginationProps: {\n      currentPageIndex: actualPageIndex !== null && actualPageIndex !== void 0 ? actualPageIndex : currentPageIndex,\n      // pagesCount is always calculated when options.pagination is present\n      pagesCount: pagesCount,\n      onChange: function (_a) {\n        var currentPageIndex = _a.detail.currentPageIndex;\n        actions.setCurrentPage(currentPageIndex);\n      }\n    }\n  };\n}","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","fixupFalsyValues","collectionReducer","state","action","newState","type","selectedItems","currentPageIndex","filteringText","sortingState","pageIndex","propertyFilteringQuery","query","createActions","_a","dispatch","collectionRef","setFiltering","current","scrollToTop","setSorting","setCurrentPage","setSelectedItems","setPropertyFiltering","createSyncProps","options","actions","_b","_c","pagesCount","actualPageIndex","allItems","empty","filtering","noMatch","propertyFiltering","filteringOptions","filteringProperties","reduce","acc","property","keys","item","key","forEach","value","push","propertyKey","collectionProps","sorting","onSortingChange","detail","sortingColumn","sortingDescending","isDescending","selection","onSelectionChange","trackBy","ref","filterProps","onChange","propertyFilterProps","paginationProps"],"sources":["/Users/igostu/repos/dissertation/node_modules/@awsui/collection-hooks/dist/mjs/utils.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { fixupFalsyValues } from './operations/property-filter.js';\nexport function collectionReducer(state, action) {\n    var newState = __assign({}, state);\n    switch (action.type) {\n        case 'selection':\n            newState.selectedItems = action.selectedItems;\n            break;\n        case 'filtering':\n            newState.currentPageIndex = 1;\n            newState.filteringText = action.filteringText;\n            break;\n        case 'sorting':\n            newState.currentPageIndex = 1;\n            newState.sortingState = action.sortingState;\n            break;\n        case 'pagination':\n            newState.currentPageIndex = action.pageIndex;\n            break;\n        case 'property-filtering':\n            newState.currentPageIndex = 1;\n            newState.propertyFilteringQuery = action.query;\n            break;\n    }\n    return newState;\n}\nexport function createActions(_a) {\n    var dispatch = _a.dispatch, collectionRef = _a.collectionRef;\n    return {\n        setFiltering: function (filteringText) {\n            dispatch({ type: 'filtering', filteringText: filteringText });\n            collectionRef.current && collectionRef.current.scrollToTop();\n        },\n        setSorting: function (state) {\n            dispatch({ type: 'sorting', sortingState: state });\n            collectionRef.current && collectionRef.current.scrollToTop();\n        },\n        setCurrentPage: function (pageIndex) {\n            dispatch({ type: 'pagination', pageIndex: pageIndex });\n            collectionRef.current && collectionRef.current.scrollToTop();\n        },\n        setSelectedItems: function (selectedItems) {\n            dispatch({ type: 'selection', selectedItems: selectedItems });\n        },\n        setPropertyFiltering: function (query) {\n            dispatch({ type: 'property-filtering', query: query });\n            collectionRef.current && collectionRef.current.scrollToTop();\n        },\n    };\n}\nexport function createSyncProps(options, _a, actions, collectionRef, _b) {\n    var _c;\n    var filteringText = _a.filteringText, sortingState = _a.sortingState, selectedItems = _a.selectedItems, currentPageIndex = _a.currentPageIndex, propertyFilteringQuery = _a.propertyFilteringQuery;\n    var pagesCount = _b.pagesCount, actualPageIndex = _b.actualPageIndex, allItems = _b.allItems;\n    var empty = options.filtering\n        ? allItems.length\n            ? options.filtering.noMatch\n            : options.filtering.empty\n        : null;\n    empty = options.propertyFiltering\n        ? allItems.length\n            ? options.propertyFiltering.noMatch\n            : options.propertyFiltering.empty\n        : empty;\n    var filteringOptions = options.propertyFiltering\n        ? options.propertyFiltering.filteringProperties.reduce(function (acc, property) {\n            Object.keys(allItems.reduce(function (acc, item) {\n                acc['' + fixupFalsyValues(item[property.key])] = true;\n                return acc;\n            }, {})).forEach(function (value) {\n                if (value !== '') {\n                    acc.push({\n                        propertyKey: property.key,\n                        value: value,\n                    });\n                }\n            });\n            return acc;\n        }, [])\n        : [];\n    return {\n        collectionProps: __assign(__assign(__assign({ empty: empty }, (options.sorting\n            ? {\n                onSortingChange: function (_a) {\n                    var detail = _a.detail;\n                    actions.setSorting(detail);\n                },\n                sortingColumn: sortingState === null || sortingState === void 0 ? void 0 : sortingState.sortingColumn,\n                sortingDescending: sortingState === null || sortingState === void 0 ? void 0 : sortingState.isDescending,\n            }\n            : {})), (options.selection\n            ? {\n                onSelectionChange: function (_a) {\n                    var selectedItems = _a.detail.selectedItems;\n                    actions.setSelectedItems(selectedItems);\n                },\n                selectedItems: selectedItems,\n                trackBy: options.selection.trackBy,\n            }\n            : {})), { ref: collectionRef }),\n        filterProps: {\n            filteringText: filteringText,\n            onChange: function (_a) {\n                var filteringText = _a.detail.filteringText;\n                actions.setFiltering(filteringText);\n            },\n        },\n        propertyFilterProps: {\n            query: propertyFilteringQuery,\n            onChange: function (_a) {\n                var query = _a.detail;\n                actions.setPropertyFiltering(query);\n            },\n            filteringProperties: ((_c = options.propertyFiltering) === null || _c === void 0 ? void 0 : _c.filteringProperties) || [],\n            filteringOptions: filteringOptions,\n        },\n        paginationProps: {\n            currentPageIndex: actualPageIndex !== null && actualPageIndex !== void 0 ? actualPageIndex : currentPageIndex,\n            // pagesCount is always calculated when options.pagination is present\n            pagesCount: pagesCount,\n            onChange: function (_a) {\n                var currentPageIndex = _a.detail.currentPageIndex;\n                actions.setCurrentPage(currentPageIndex);\n            },\n        },\n    };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}