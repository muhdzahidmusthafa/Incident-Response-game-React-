{"ast":null,"code":"import { filter } from './filter.js';\nimport { propertyFilter } from './property-filter.js';\nimport { sort } from './sort.js';\nimport { getPagesCount, normalizePageIndex, paginate } from './paginate.js';\nexport function processItems(items, _a, _b) {\n  var filteringText = _a.filteringText,\n      sortingState = _a.sortingState,\n      currentPageIndex = _a.currentPageIndex,\n      propertyFilteringQuery = _a.propertyFilteringQuery;\n  var filtering = _b.filtering,\n      sorting = _b.sorting,\n      pagination = _b.pagination,\n      propertyFiltering = _b.propertyFiltering;\n  var result = items;\n  var pagesCount;\n  var actualPageIndex;\n  var filteredItemsCount;\n\n  if (propertyFiltering) {\n    result = propertyFilter(result, propertyFilteringQuery || {\n      tokens: [],\n      operation: 'and'\n    }, propertyFiltering);\n    filteredItemsCount = result.length;\n  }\n\n  if (filtering) {\n    result = filter(result, filteringText, filtering);\n    filteredItemsCount = result.length;\n  }\n\n  if (sorting) {\n    result = sort(result, sortingState);\n  }\n\n  if (pagination) {\n    pagesCount = getPagesCount(result, pagination.pageSize);\n    actualPageIndex = normalizePageIndex(currentPageIndex, pagesCount);\n    result = paginate(result, actualPageIndex, pagination.pageSize);\n  }\n\n  return {\n    items: result,\n    pagesCount: pagesCount,\n    filteredItemsCount: filteredItemsCount,\n    actualPageIndex: actualPageIndex\n  };\n}\nexport var getTrackableValue = function (trackBy, item) {\n  if (!trackBy) {\n    return item;\n  }\n\n  if (typeof trackBy === 'function') {\n    return trackBy(item);\n  }\n\n  return item[trackBy];\n};\nexport var processSelectedItems = function (items, selectedItems, trackBy) {\n  var selectedSet = new Set();\n  selectedItems.forEach(function (item) {\n    return selectedSet.add(getTrackableValue(trackBy, item));\n  });\n  return items.filter(function (item) {\n    return selectedSet.has(getTrackableValue(trackBy, item));\n  });\n};\nexport var itemsAreEqual = function (items1, items2, trackBy) {\n  if (items1.length !== items2.length) {\n    return false;\n  }\n\n  var set1 = new Set();\n  items1.forEach(function (item) {\n    return set1.add(getTrackableValue(trackBy, item));\n  });\n  return items2.every(function (item) {\n    return set1.has(getTrackableValue(trackBy, item));\n  });\n};","map":{"version":3,"names":["filter","propertyFilter","sort","getPagesCount","normalizePageIndex","paginate","processItems","items","_a","_b","filteringText","sortingState","currentPageIndex","propertyFilteringQuery","filtering","sorting","pagination","propertyFiltering","result","pagesCount","actualPageIndex","filteredItemsCount","tokens","operation","length","pageSize","getTrackableValue","trackBy","item","processSelectedItems","selectedItems","selectedSet","Set","forEach","add","has","itemsAreEqual","items1","items2","set1","every"],"sources":["/Users/igostu/repos/dissertation/node_modules/@awsui/collection-hooks/dist/mjs/operations/index.js"],"sourcesContent":["import { filter } from './filter.js';\nimport { propertyFilter } from './property-filter.js';\nimport { sort } from './sort.js';\nimport { getPagesCount, normalizePageIndex, paginate } from './paginate.js';\nexport function processItems(items, _a, _b) {\n    var filteringText = _a.filteringText, sortingState = _a.sortingState, currentPageIndex = _a.currentPageIndex, propertyFilteringQuery = _a.propertyFilteringQuery;\n    var filtering = _b.filtering, sorting = _b.sorting, pagination = _b.pagination, propertyFiltering = _b.propertyFiltering;\n    var result = items;\n    var pagesCount;\n    var actualPageIndex;\n    var filteredItemsCount;\n    if (propertyFiltering) {\n        result = propertyFilter(result, propertyFilteringQuery || { tokens: [], operation: 'and' }, propertyFiltering);\n        filteredItemsCount = result.length;\n    }\n    if (filtering) {\n        result = filter(result, filteringText, filtering);\n        filteredItemsCount = result.length;\n    }\n    if (sorting) {\n        result = sort(result, sortingState);\n    }\n    if (pagination) {\n        pagesCount = getPagesCount(result, pagination.pageSize);\n        actualPageIndex = normalizePageIndex(currentPageIndex, pagesCount);\n        result = paginate(result, actualPageIndex, pagination.pageSize);\n    }\n    return { items: result, pagesCount: pagesCount, filteredItemsCount: filteredItemsCount, actualPageIndex: actualPageIndex };\n}\nexport var getTrackableValue = function (trackBy, item) {\n    if (!trackBy) {\n        return item;\n    }\n    if (typeof trackBy === 'function') {\n        return trackBy(item);\n    }\n    return item[trackBy];\n};\nexport var processSelectedItems = function (items, selectedItems, trackBy) {\n    var selectedSet = new Set();\n    selectedItems.forEach(function (item) { return selectedSet.add(getTrackableValue(trackBy, item)); });\n    return items.filter(function (item) { return selectedSet.has(getTrackableValue(trackBy, item)); });\n};\nexport var itemsAreEqual = function (items1, items2, trackBy) {\n    if (items1.length !== items2.length) {\n        return false;\n    }\n    var set1 = new Set();\n    items1.forEach(function (item) { return set1.add(getTrackableValue(trackBy, item)); });\n    return items2.every(function (item) { return set1.has(getTrackableValue(trackBy, item)); });\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}