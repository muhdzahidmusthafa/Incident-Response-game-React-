{"ast":null,"code":"import { __rest } from \"tslib\";\nexport var flattenOptions = function (options) {\n  var parentMap = new Map();\n  var flatOptions = options.reduce(function (acc, option) {\n    if ('options' in option) {\n      var options_1 = option.options,\n          rest_1 = __rest(option, [\"options\"]);\n\n      var parentDropdownOption_1 = {\n        type: 'parent',\n        option: option\n      };\n      var allOptionsDisabled = options_1.every(function (option) {\n        return option.disabled;\n      });\n\n      if (option.disabled || allOptionsDisabled) {\n        parentDropdownOption_1.disabled = true;\n      }\n\n      acc.push(parentDropdownOption_1);\n      options_1.forEach(function (child) {\n        var childDropdownOption = {\n          type: 'child',\n          option: child\n        };\n\n        if (rest_1.disabled || child.disabled) {\n          childDropdownOption.disabled = true;\n        }\n\n        acc.push(childDropdownOption);\n        parentMap.set(childDropdownOption, parentDropdownOption_1);\n      });\n    } else {\n      var dropdownOption = {\n        option: option\n      };\n\n      if (option.disabled) {\n        dropdownOption.disabled = true;\n      }\n\n      acc.push(dropdownOption);\n    }\n\n    return acc;\n  }, []);\n  return {\n    flatOptions: flatOptions,\n    parentMap: parentMap\n  };\n};","map":{"version":3,"mappings":";AAIA,OAAO,IAAMA,cAAc,GAAG,UAACC,OAAD,EAAuD;EACnF,IAAMC,SAAS,GAAG,IAAIC,GAAJ,EAAlB;EAEA,IAAMC,WAAW,GAAGH,OAAO,CAACI,MAAR,CAAiC,UAACC,GAAD,EAAMC,MAAN,EAAY;IAC/D,IAAI,aAAaA,MAAjB,EAAyB;MACf,aAAO,GAAcA,MAAM,QAA3B;MAAA,IAAYC,MAAI,UAAKD,MAAL,EAAlB,WAAkB,CAAhB;;MACR,IAAME,sBAAoB,GAAmB;QAAEC,IAAI,EAAE,QAAR;QAAkBH,MAAM;MAAxB,CAA7C;MACA,IAAMI,kBAAkB,GAAGC,SAAO,CAACC,KAAR,CAAc,kBAAM;QAAI,aAAM,CAACC,QAAP;MAAe,CAAvC,CAA3B;;MACA,IAAIP,MAAM,CAACO,QAAP,IAAmBH,kBAAvB,EAA2C;QACzCF,sBAAoB,CAACK,QAArB,GAAgC,IAAhC;MACD;;MACDR,GAAG,CAACS,IAAJ,CAASN,sBAAT;MACAG,SAAO,CAACI,OAAR,CAAgB,iBAAK;QACnB,IAAMC,mBAAmB,GAAmB;UAAEP,IAAI,EAAE,OAAR;UAAiBH,MAAM,EAAEW;QAAzB,CAA5C;;QACA,IAAIV,MAAI,CAACM,QAAL,IAAiBI,KAAK,CAACJ,QAA3B,EAAqC;UACnCG,mBAAmB,CAACH,QAApB,GAA+B,IAA/B;QACD;;QACDR,GAAG,CAACS,IAAJ,CAASE,mBAAT;QACAf,SAAS,CAACiB,GAAV,CAAcF,mBAAd,EAAmCR,sBAAnC;MACD,CAPD;IAQD,CAhBD,MAgBO;MACL,IAAMW,cAAc,GAAmB;QAAEb,MAAM;MAAR,CAAvC;;MACA,IAAIA,MAAM,CAACO,QAAX,EAAqB;QACnBM,cAAc,CAACN,QAAf,GAA0B,IAA1B;MACD;;MACDR,GAAG,CAACS,IAAJ,CAASK,cAAT;IACD;;IAED,OAAOd,GAAP;EACD,CA1BmB,EA0BjB,EA1BiB,CAApB;EA4BA,OAAO;IACLF,WAAW,aADN;IAELF,SAAS;EAFJ,CAAP;AAID,CAnCM","names":["flattenOptions","options","parentMap","Map","flatOptions","reduce","acc","option","rest_1","parentDropdownOption_1","type","allOptionsDisabled","options_1","every","disabled","push","forEach","childDropdownOption","child","set","dropdownOption"],"sourceRoot":"","sources":["../../../../../../src/internal/components/option/utils/flatten-options.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { OptionGroup, OptionDefinition, DropdownOption } from '../interfaces';\n\nexport const flattenOptions = (options: ReadonlyArray<OptionDefinition | OptionGroup>) => {\n  const parentMap = new Map<DropdownOption, DropdownOption>();\n\n  const flatOptions = options.reduce<DropdownOption[]>((acc, option) => {\n    if ('options' in option) {\n      const { options, ...rest } = option;\n      const parentDropdownOption: DropdownOption = { type: 'parent', option };\n      const allOptionsDisabled = options.every(option => option.disabled);\n      if (option.disabled || allOptionsDisabled) {\n        parentDropdownOption.disabled = true;\n      }\n      acc.push(parentDropdownOption);\n      options.forEach(child => {\n        const childDropdownOption: DropdownOption = { type: 'child', option: child };\n        if (rest.disabled || child.disabled) {\n          childDropdownOption.disabled = true;\n        }\n        acc.push(childDropdownOption);\n        parentMap.set(childDropdownOption, parentDropdownOption);\n      });\n    } else {\n      const dropdownOption: DropdownOption = { option };\n      if (option.disabled) {\n        dropdownOption.disabled = true;\n      }\n      acc.push(dropdownOption);\n    }\n\n    return acc;\n  }, []);\n\n  return {\n    flatOptions,\n    parentMap,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}