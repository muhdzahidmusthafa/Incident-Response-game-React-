{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport AsyncStore from './async-store';\nvar initialState = Object.freeze({\n  highlightedX: null,\n  highlightedPoint: null,\n  highlightedSeries: null,\n  legendSeries: null,\n  isPopoverPinned: false\n});\n\nvar InteractionsStore =\n/** @class */\nfunction (_super) {\n  __extends(InteractionsStore, _super);\n\n  function InteractionsStore(series, plot) {\n    var _this = _super.call(this, initialState) || this;\n\n    _this.series = series;\n    _this.plot = plot;\n    return _this;\n  }\n\n  InteractionsStore.prototype.highlightPoint = function (point) {\n    var _this = this;\n\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        highlightedX: _this.plot.xy[point.index.x],\n        highlightedPoint: point,\n        highlightedSeries: _this.series[point.index.s],\n        legendSeries: _this.series[point.index.s]\n      });\n    });\n  };\n\n  InteractionsStore.prototype.highlightX = function (points) {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        highlightedX: points,\n        highlightedPoint: null,\n        highlightedSeries: null\n      });\n    });\n  };\n\n  InteractionsStore.prototype.highlightFirstPoint = function () {\n    var _this = this;\n\n    this.set(function (state) {\n      var series = state.legendSeries || state.highlightedSeries;\n\n      var firstSeriesPoint = series && _this._getFirstSeriesPoint(series);\n\n      var point = state.highlightedPoint || firstSeriesPoint || _this.plot.sx[0][0];\n      return __assign(__assign({}, state), {\n        highlightedX: _this.plot.xy[point.index.x],\n        highlightedPoint: point,\n        highlightedSeries: _this.series[point.index.s],\n        legendSeries: _this.series[point.index.s]\n      });\n    });\n  };\n\n  InteractionsStore.prototype.highlightSeries = function (s) {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        highlightedSeries: s,\n        legendSeries: s\n      });\n    });\n  };\n\n  InteractionsStore.prototype.clearHighlight = function () {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        highlightedX: null,\n        highlightedPoint: null,\n        highlightedSeries: null\n      });\n    });\n  };\n\n  InteractionsStore.prototype.clearHighlightedLegend = function () {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        legendSeries: null\n      });\n    });\n  };\n\n  InteractionsStore.prototype.clearState = function () {\n    this.set(function () {\n      return initialState;\n    });\n  };\n\n  InteractionsStore.prototype.pinPopover = function () {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        isPopoverPinned: true\n      });\n    });\n  };\n\n  InteractionsStore.prototype.unpinPopover = function () {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        isPopoverPinned: false\n      });\n    });\n  };\n\n  InteractionsStore.prototype.togglePopoverPin = function () {\n    this.set(function (state) {\n      return __assign(__assign({}, state), {\n        isPopoverPinned: !state.isPopoverPinned\n      });\n    });\n  };\n\n  InteractionsStore.prototype._getFirstSeriesPoint = function (s) {\n    var seriesIndex = this.series.indexOf(s);\n    var firstSeriesPoint = (this.plot.sx[seriesIndex] || [])[0];\n    return firstSeriesPoint || null;\n  };\n\n  return InteractionsStore;\n}(AsyncStore);\n\nexport default InteractionsStore;","map":{"version":3,"mappings":"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","names":["AsyncStore","initialState","Object","freeze","highlightedX","highlightedPoint","highlightedSeries","legendSeries","isPopoverPinned","__extends","series","plot","_super","_this","InteractionsStore","point","set","state","xy","index","x","s","points","firstSeriesPoint","_getFirstSeriesPoint","sx","seriesIndex","indexOf"],"sourceRoot":"","sources":["../../../../src/area-chart/model/interactions-store.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ChartModel } from './index';\nimport { AreaChartProps } from '../interfaces';\n\nimport AsyncStore from './async-store';\n\nconst initialState = Object.freeze({\n  highlightedX: null,\n  highlightedPoint: null,\n  highlightedSeries: null,\n  legendSeries: null,\n  isPopoverPinned: false,\n});\n\nexport default class InteractionsStore<T extends AreaChartProps.DataTypes> extends AsyncStore<\n  ChartModel.InteractionsState<T>\n> {\n  series: readonly AreaChartProps.Series<T>[];\n  plot: ChartModel.ComputedProps<T>['plot'];\n\n  constructor(series: readonly AreaChartProps.Series<T>[], plot: ChartModel.ComputedProps<T>['plot']) {\n    super(initialState);\n\n    this.series = series;\n    this.plot = plot;\n  }\n\n  highlightPoint(point: ChartModel.PlotPoint<T>) {\n    this.set(state => ({\n      ...state,\n      highlightedX: this.plot.xy[point.index.x],\n      highlightedPoint: point,\n      highlightedSeries: this.series[point.index.s],\n      legendSeries: this.series[point.index.s],\n    }));\n  }\n\n  highlightX(points: readonly ChartModel.PlotPoint<T>[]) {\n    this.set(state => ({\n      ...state,\n      highlightedX: points,\n      highlightedPoint: null,\n      highlightedSeries: null,\n    }));\n  }\n\n  highlightFirstPoint() {\n    this.set(state => {\n      const series = state.legendSeries || state.highlightedSeries;\n      const firstSeriesPoint = series && this._getFirstSeriesPoint(series);\n      const point = state.highlightedPoint || firstSeriesPoint || this.plot.sx[0][0];\n      return {\n        ...state,\n        highlightedX: this.plot.xy[point.index.x],\n        highlightedPoint: point,\n        highlightedSeries: this.series[point.index.s],\n        legendSeries: this.series[point.index.s],\n      };\n    });\n  }\n\n  highlightSeries(s: null | AreaChartProps.Series<T>) {\n    this.set(state => ({\n      ...state,\n      highlightedSeries: s,\n      legendSeries: s,\n    }));\n  }\n\n  clearHighlight() {\n    this.set(state => ({\n      ...state,\n      highlightedX: null,\n      highlightedPoint: null,\n      highlightedSeries: null,\n    }));\n  }\n  clearHighlightedLegend() {\n    this.set(state => ({\n      ...state,\n      legendSeries: null,\n    }));\n  }\n\n  clearState() {\n    this.set(() => initialState);\n  }\n\n  pinPopover() {\n    this.set(state => ({ ...state, isPopoverPinned: true }));\n  }\n\n  unpinPopover() {\n    this.set(state => ({ ...state, isPopoverPinned: false }));\n  }\n\n  togglePopoverPin() {\n    this.set(state => ({ ...state, isPopoverPinned: !state.isPopoverPinned }));\n  }\n\n  _getFirstSeriesPoint(s: AreaChartProps.Series<T>): null | ChartModel.PlotPoint<T> {\n    const seriesIndex = this.series.indexOf(s);\n    const [firstSeriesPoint] = this.plot.sx[seriesIndex] || [];\n    return firstSeriesPoint || null;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}