{"ast":null,"code":"var filterUsingOperator = function (itemValue, tokenValue, operator) {\n  switch (operator) {\n    case '<':\n      return itemValue < tokenValue;\n\n    case '<=':\n      return itemValue <= tokenValue;\n\n    case '>':\n      return itemValue > tokenValue;\n\n    case '>=':\n      return itemValue >= tokenValue;\n\n    case '=':\n      // eslint-disable-next-line eqeqeq\n      return itemValue == tokenValue;\n\n    case '!=':\n      // eslint-disable-next-line eqeqeq\n      return itemValue != tokenValue;\n\n    case ':':\n      return (itemValue + '').toLowerCase().indexOf((tokenValue + '').toLowerCase()) > -1;\n\n    case '!:':\n      return (itemValue + '').toLowerCase().indexOf((tokenValue + '').toLowerCase()) === -1;\n  }\n};\n\nfunction freeTextFilter(value, item, operator, filteringPropertiesMap) {\n  var matches = Object.keys(filteringPropertiesMap).some(function (propertyKey) {\n    var operators = filteringPropertiesMap[propertyKey].operators;\n    return !!operators[operator] && filterUsingOperator(item[propertyKey], value, ':');\n  });\n  return operator === ':' ? matches : !matches;\n}\n\nfunction filterByToken(token, item, filteringPropertiesMap) {\n  if (token.propertyKey) {\n    // token refers to a unknown property or uses an unsupported operator\n    if (!(token.propertyKey in filteringPropertiesMap) || !(token.operator in filteringPropertiesMap[token.propertyKey].operators)) {\n      return false;\n    }\n\n    var itemValue = fixupFalsyValues(item[token.propertyKey]);\n    return filterUsingOperator(itemValue, token.value, token.operator);\n  }\n\n  return freeTextFilter(token.value, item, token.operator, filteringPropertiesMap);\n}\n\nfunction defaultFilteringFunction(filteringPropertiesMap) {\n  return function (item, _a) {\n    var tokens = _a.tokens,\n        operation = _a.operation;\n    var result = operation === 'and' ? true : !tokens.length;\n\n    for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n      var token = tokens_1[_i];\n      result = operation === 'and' ? result && filterByToken(token, item, filteringPropertiesMap) : result || filterByToken(token, item, filteringPropertiesMap);\n    }\n\n    return result;\n  };\n}\n\nexport function propertyFilter(items, query, _a) {\n  var filteringFunction = _a.filteringFunction,\n      filteringProperties = _a.filteringProperties;\n  var filteringPropertiesMap = filteringProperties.reduce(function (acc, _a) {\n    var _b;\n\n    var key = _a.key,\n        operators = _a.operators,\n        defaultOperator = _a.defaultOperator;\n    var operatorSet = (_b = {}, _b[defaultOperator !== null && defaultOperator !== void 0 ? defaultOperator : '='] = true, _b);\n    operators === null || operators === void 0 ? void 0 : operators.forEach(function (op) {\n      return operatorSet[op] = true;\n    });\n    acc[key] = {\n      operators: operatorSet\n    };\n    return acc;\n  }, {});\n  var filter = filteringFunction || defaultFilteringFunction(filteringPropertiesMap);\n  return items.filter(function (item) {\n    return filter(item, query);\n  });\n}\nexport var fixupFalsyValues = function (value) {\n  if (typeof value === 'boolean') {\n    return value + '';\n  }\n\n  if (value || value === 0) {\n    return value;\n  }\n\n  return '';\n};","map":{"version":3,"names":["filterUsingOperator","itemValue","tokenValue","operator","toLowerCase","indexOf","freeTextFilter","value","item","filteringPropertiesMap","matches","Object","keys","some","propertyKey","operators","filterByToken","token","fixupFalsyValues","defaultFilteringFunction","_a","tokens","operation","result","length","_i","tokens_1","propertyFilter","items","query","filteringFunction","filteringProperties","reduce","acc","_b","key","defaultOperator","operatorSet","forEach","op","filter"],"sources":["/Users/igostu/repos/dissertation/node_modules/@awsui/collection-hooks/dist/mjs/operations/property-filter.js"],"sourcesContent":["var filterUsingOperator = function (itemValue, tokenValue, operator) {\n    switch (operator) {\n        case '<':\n            return itemValue < tokenValue;\n        case '<=':\n            return itemValue <= tokenValue;\n        case '>':\n            return itemValue > tokenValue;\n        case '>=':\n            return itemValue >= tokenValue;\n        case '=':\n            // eslint-disable-next-line eqeqeq\n            return itemValue == tokenValue;\n        case '!=':\n            // eslint-disable-next-line eqeqeq\n            return itemValue != tokenValue;\n        case ':':\n            return (itemValue + '').toLowerCase().indexOf((tokenValue + '').toLowerCase()) > -1;\n        case '!:':\n            return (itemValue + '').toLowerCase().indexOf((tokenValue + '').toLowerCase()) === -1;\n    }\n};\nfunction freeTextFilter(value, item, operator, filteringPropertiesMap) {\n    var matches = Object.keys(filteringPropertiesMap).some(function (propertyKey) {\n        var operators = filteringPropertiesMap[propertyKey].operators;\n        return !!operators[operator] && filterUsingOperator(item[propertyKey], value, ':');\n    });\n    return operator === ':' ? matches : !matches;\n}\nfunction filterByToken(token, item, filteringPropertiesMap) {\n    if (token.propertyKey) {\n        // token refers to a unknown property or uses an unsupported operator\n        if (!(token.propertyKey in filteringPropertiesMap) ||\n            !(token.operator in filteringPropertiesMap[token.propertyKey].operators)) {\n            return false;\n        }\n        var itemValue = fixupFalsyValues(item[token.propertyKey]);\n        return filterUsingOperator(itemValue, token.value, token.operator);\n    }\n    return freeTextFilter(token.value, item, token.operator, filteringPropertiesMap);\n}\nfunction defaultFilteringFunction(filteringPropertiesMap) {\n    return function (item, _a) {\n        var tokens = _a.tokens, operation = _a.operation;\n        var result = operation === 'and' ? true : !tokens.length;\n        for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n            var token = tokens_1[_i];\n            result =\n                operation === 'and'\n                    ? result && filterByToken(token, item, filteringPropertiesMap)\n                    : result || filterByToken(token, item, filteringPropertiesMap);\n        }\n        return result;\n    };\n}\nexport function propertyFilter(items, query, _a) {\n    var filteringFunction = _a.filteringFunction, filteringProperties = _a.filteringProperties;\n    var filteringPropertiesMap = filteringProperties.reduce(function (acc, _a) {\n        var _b;\n        var key = _a.key, operators = _a.operators, defaultOperator = _a.defaultOperator;\n        var operatorSet = (_b = {}, _b[defaultOperator !== null && defaultOperator !== void 0 ? defaultOperator : '='] = true, _b);\n        operators === null || operators === void 0 ? void 0 : operators.forEach(function (op) { return (operatorSet[op] = true); });\n        acc[key] = {\n            operators: operatorSet,\n        };\n        return acc;\n    }, {});\n    var filter = filteringFunction || defaultFilteringFunction(filteringPropertiesMap);\n    return items.filter(function (item) { return filter(item, query); });\n}\nexport var fixupFalsyValues = function (value) {\n    if (typeof value === 'boolean') {\n        return value + '';\n    }\n    if (value || value === 0) {\n        return value;\n    }\n    return '';\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}