{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport styles from './styles.css.js';\nimport { browserScrollbarSize } from '../internal/utils/browser-scrollbar-size';\nvar initialBodyPaddingRightStyle = undefined;\nexport function disableBodyScrolling() {\n  setBodyScrollbarPadding();\n  document.body.classList.add(styles['modal-open']);\n}\nexport function enableBodyScrolling() {\n  document.body.classList.remove(styles['modal-open']);\n  restoreBodyScrollbarPadding();\n}\n\nfunction setBodyScrollbarPadding() {\n  if (bodyHasScrollbar()) {\n    initialBodyPaddingRightStyle = document.body.style.paddingRight;\n    var initialBodyPaddingRight = computedBodyPaddingRightPixels();\n    var scrollbarWidth = browserScrollbarSize().width;\n    var newBodyPaddingRight = initialBodyPaddingRight + scrollbarWidth;\n    document.body.style.paddingRight = newBodyPaddingRight + 'px';\n  }\n}\n\nfunction computedBodyPaddingRightPixels() {\n  return parseInt(window.getComputedStyle(document.body).paddingRight, 10);\n}\n\nfunction restoreBodyScrollbarPadding() {\n  if (initialBodyPaddingRightStyle) {\n    document.body.style.setProperty('padding-right', initialBodyPaddingRightStyle);\n  } else {\n    document.body.style.removeProperty('padding-right');\n  }\n\n  initialBodyPaddingRightStyle = undefined;\n}\n\nfunction bodyHasScrollbar() {\n  // Unfortunately this difference doesn't appear to match the scrollbar width during testing,\n  // otherwise we could remove browserScrollbarSize().  Bootstrap also doesn't use this difference\n  // directly.\n  return document.body.clientWidth < window.innerWidth;\n}","map":{"version":3,"mappings":"AAAA;AACA;AACA,OAAOA,MAAP,MAAmB,iBAAnB;AACA,SAASC,oBAAT,QAAqC,0CAArC;AAEA,IAAIC,4BAA4B,GAAuBC,SAAvD;AAEA,OAAM,SAAUC,oBAAV,GAA8B;EAClCC,uBAAuB;EACvBC,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4BT,MAAM,CAAC,YAAD,CAAlC;AACD;AAED,OAAM,SAAUU,mBAAV,GAA6B;EACjCJ,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBG,MAAxB,CAA+BX,MAAM,CAAC,YAAD,CAArC;EACAY,2BAA2B;AAC5B;;AAED,SAASP,uBAAT,GAAgC;EAC9B,IAAIQ,gBAAgB,EAApB,EAAwB;IACtBX,4BAA4B,GAAGI,QAAQ,CAACC,IAAT,CAAcO,KAAd,CAAoBC,YAAnD;IACA,IAAMC,uBAAuB,GAAGC,8BAA8B,EAA9D;IACA,IAAMC,cAAc,GAAGjB,oBAAoB,GAAGkB,KAA9C;IACA,IAAMC,mBAAmB,GAAGJ,uBAAuB,GAAGE,cAAtD;IACAZ,QAAQ,CAACC,IAAT,CAAcO,KAAd,CAAoBC,YAApB,GAAmCK,mBAAmB,GAAG,IAAzD;EACD;AACF;;AAED,SAASH,8BAAT,GAAuC;EACrC,OAAOI,QAAQ,CAACC,MAAM,CAACC,gBAAP,CAAwBjB,QAAQ,CAACC,IAAjC,EAAuCQ,YAAxC,EAAsD,EAAtD,CAAf;AACD;;AAED,SAASH,2BAAT,GAAoC;EAClC,IAAIV,4BAAJ,EAAkC;IAChCI,QAAQ,CAACC,IAAT,CAAcO,KAAd,CAAoBU,WAApB,CAAgC,eAAhC,EAAiDtB,4BAAjD;EACD,CAFD,MAEO;IACLI,QAAQ,CAACC,IAAT,CAAcO,KAAd,CAAoBW,cAApB,CAAmC,eAAnC;EACD;;EACDvB,4BAA4B,GAAGC,SAA/B;AACD;;AAED,SAASU,gBAAT,GAAyB;EACvB;EACA;EACA;EACA,OAAOP,QAAQ,CAACC,IAAT,CAAcmB,WAAd,GAA4BJ,MAAM,CAACK,UAA1C;AACD","names":["styles","browserScrollbarSize","initialBodyPaddingRightStyle","undefined","disableBodyScrolling","setBodyScrollbarPadding","document","body","classList","add","enableBodyScrolling","remove","restoreBodyScrollbarPadding","bodyHasScrollbar","style","paddingRight","initialBodyPaddingRight","computedBodyPaddingRightPixels","scrollbarWidth","width","newBodyPaddingRight","parseInt","window","getComputedStyle","setProperty","removeProperty","clientWidth","innerWidth"],"sourceRoot":"","sources":["../../../src/modal/body-scroll.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport styles from './styles.css.js';\nimport { browserScrollbarSize } from '../internal/utils/browser-scrollbar-size';\n\nlet initialBodyPaddingRightStyle: string | undefined = undefined;\n\nexport function disableBodyScrolling() {\n  setBodyScrollbarPadding();\n  document.body.classList.add(styles['modal-open']);\n}\n\nexport function enableBodyScrolling() {\n  document.body.classList.remove(styles['modal-open']);\n  restoreBodyScrollbarPadding();\n}\n\nfunction setBodyScrollbarPadding() {\n  if (bodyHasScrollbar()) {\n    initialBodyPaddingRightStyle = document.body.style.paddingRight;\n    const initialBodyPaddingRight = computedBodyPaddingRightPixels();\n    const scrollbarWidth = browserScrollbarSize().width;\n    const newBodyPaddingRight = initialBodyPaddingRight + scrollbarWidth;\n    document.body.style.paddingRight = newBodyPaddingRight + 'px';\n  }\n}\n\nfunction computedBodyPaddingRightPixels() {\n  return parseInt(window.getComputedStyle(document.body).paddingRight, 10);\n}\n\nfunction restoreBodyScrollbarPadding() {\n  if (initialBodyPaddingRightStyle) {\n    document.body.style.setProperty('padding-right', initialBodyPaddingRightStyle);\n  } else {\n    document.body.style.removeProperty('padding-right');\n  }\n  initialBodyPaddingRightStyle = undefined;\n}\n\nfunction bodyHasScrollbar() {\n  // Unfortunately this difference doesn't appear to match the scrollbar width during testing,\n  // otherwise we could remove browserScrollbarSize().  Bootstrap also doesn't use this difference\n  // directly.\n  return document.body.clientWidth < window.innerWidth;\n}\n"]},"metadata":{},"sourceType":"module"}