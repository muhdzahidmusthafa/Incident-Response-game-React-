{"ast":null,"code":"import { __assign, __rest } from \"tslib\"; // Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { forwardRef, useState } from 'react';\nimport clsx from 'clsx';\nimport { fireCancelableEvent, isPlainLeftClick } from '../../../internal/events';\nimport { useUniqueId } from '../../../internal/hooks/use-unique-id';\nimport useFocusVisible from '../../../internal/hooks/focus-visible';\nimport InternalIcon from '../../../icon/internal';\nimport { useNavigate } from './router';\nimport styles from '../../styles.css.js';\n\nvar ListItem = function (_a) {\n  var children = _a.children,\n      startIcon = _a.startIcon,\n      endIcon = _a.endIcon;\n  return React.createElement(React.Fragment, null, startIcon && React.createElement(\"span\", {\n    className: styles['overflow-menu-list-item-icon']\n  }, startIcon), React.createElement(\"span\", {\n    className: styles['overflow-menu-list-item-text']\n  }, children), endIcon && endIcon);\n};\n\nvar LinkItem = forwardRef(function (_a, ref) {\n  var children = _a.children,\n      external = _a.external,\n      href = _a.href,\n      startIcon = _a.startIcon,\n      endIcon = _a.endIcon,\n      onFollow = _a.onFollow,\n      context = _a.context,\n      testId = _a.testId;\n  var focusVisible = useFocusVisible();\n  var rel = external ? 'noopener noreferrer' : undefined;\n  var target = external ? '_blank' : undefined;\n  var anchorProps = {\n    rel: rel,\n    target: target,\n    href: href,\n    onClick: function (event) {\n      if (isPlainLeftClick(event)) {\n        onFollow === null || onFollow === void 0 ? void 0 : onFollow(event);\n      }\n    }\n  };\n  var buttonProps = {\n    role: 'button',\n    tabIndex: 0,\n    onKeyDown: function (event) {\n      if (event.key === ' ') {\n        event.preventDefault();\n      }\n    },\n    onKeyUp: function (event) {\n      if (event.key === ' ' || event.key === 'Enter') {\n        onFollow === null || onFollow === void 0 ? void 0 : onFollow(event);\n      }\n    },\n    onClick: onFollow\n  };\n  return React.createElement(\"a\", __assign({\n    ref: ref,\n    className: clsx(styles['overflow-menu-control'], styles['overflow-menu-control-link'], context && styles[\"overflow-menu-control-\".concat(context)])\n  }, typeof href === 'string' ? anchorProps : buttonProps, focusVisible, testId ? {\n    'data-testid': testId\n  } : {}), React.createElement(ListItem, {\n    startIcon: startIcon,\n    endIcon: endIcon\n  }, children));\n});\nvar ButtonItem = forwardRef(function (_a, ref) {\n  var children = _a.children,\n      startIcon = _a.startIcon,\n      endIcon = _a.endIcon,\n      onClick = _a.onFollow,\n      testId = _a.testId;\n  var focusVisible = useFocusVisible();\n  return React.createElement(\"button\", __assign({\n    ref: ref,\n    className: styles['overflow-menu-control'],\n    onClick: onClick\n  }, focusVisible, typeof testId === 'string' ? {\n    'data-testid': testId\n  } : {}), React.createElement(ListItem, {\n    startIcon: startIcon,\n    endIcon: endIcon\n  }, children));\n});\nvar NavigationItem = forwardRef(function (_a, ref) {\n  var startIcon = _a.startIcon,\n      children = _a.children,\n      index = _a.index,\n      testId = _a.testId,\n      definition = __rest(_a, [\"startIcon\", \"children\", \"index\", \"testId\"]);\n\n  var navigate = useNavigate();\n  return React.createElement(ButtonItem, {\n    ref: ref,\n    startIcon: startIcon,\n    endIcon: React.createElement(InternalIcon, {\n      name: \"angle-right\"\n    }),\n    testId: testId,\n    onFollow: function () {\n      return navigate('dropdown-menu', {\n        definition: definition,\n        headerText: definition.text || definition.title,\n        headerSecondaryText: definition.description,\n        utilityIndex: index\n      });\n    }\n  }, children);\n});\n\nvar ExpandableItem = function (_a) {\n  var children = _a.children,\n      onItemClick = _a.onItemClick,\n      definition = __rest(_a, [\"children\", \"onItemClick\"]);\n\n  var focusVisible = useFocusVisible();\n\n  var _b = useState(false),\n      expanded = _b[0],\n      setExpanded = _b[1];\n\n  var headerId = useUniqueId('overflow-menu-item');\n  return React.createElement(React.Fragment, null, React.createElement(\"button\", __assign({\n    className: clsx(styles['overflow-menu-control'], styles['overflow-menu-control-expandable-menu-trigger']),\n    onClick: function () {\n      return setExpanded(function (value) {\n        return !value;\n      });\n    },\n    \"aria-expanded\": expanded\n  }, focusVisible), React.createElement(ListItem, {\n    endIcon: React.createElement(\"span\", {\n      className: clsx(styles.icon, expanded && styles.expanded)\n    }, React.createElement(InternalIcon, {\n      name: \"caret-up-filled\"\n    }))\n  }, React.createElement(\"span\", {\n    id: headerId\n  }, children))), expanded && React.createElement(\"ul\", {\n    className: clsx(styles['overflow-menu-list'], styles['overflow-menu-list-submenu']),\n    \"aria-labelledby\": headerId\n  }, definition.items.map(function (item, index) {\n    var isGroup = typeof item.items !== 'undefined';\n    return React.createElement(\"li\", {\n      key: index,\n      className: clsx(styles[\"overflow-menu-list-item\"], styles[\"overflow-menu-list-item-dropdown-menu\"])\n    }, dropdownComponentFactory(item, isGroup, onItemClick));\n  })));\n};\n\nfunction utilityComponentFactory(utility, index, ref) {\n  var label = utility.text || utility.title;\n  var hasIcon = !!utility.iconName || !!utility.iconUrl || !!utility.iconAlt || !!utility.iconSvg;\n  var startIcon = hasIcon && React.createElement(InternalIcon, {\n    name: utility.iconName,\n    url: utility.iconUrl,\n    alt: utility.iconAlt,\n    svg: utility.iconSvg\n  });\n\n  switch (utility.type) {\n    case 'button':\n      {\n        var handleClick = function (event) {\n          fireCancelableEvent(utility.onClick, {}, event);\n        };\n\n        if (utility.variant === 'primary-button') {\n          return React.createElement(ButtonItem, {\n            ref: ref,\n            startIcon: startIcon,\n            onFollow: handleClick,\n            testId: \"__\".concat(index)\n          }, label);\n        }\n\n        return React.createElement(LinkItem, {\n          ref: ref,\n          startIcon: startIcon,\n          href: utility.href,\n          external: utility.external,\n          testId: \"__\".concat(index),\n          onFollow: handleClick\n        }, label, utility.external && React.createElement(React.Fragment, null, ' ', React.createElement(\"span\", {\n          \"aria-label\": utility.externalIconAriaLabel,\n          role: utility.externalIconAriaLabel ? 'img' : undefined\n        }, React.createElement(InternalIcon, {\n          name: \"external\",\n          size: \"normal\"\n        }))));\n      }\n\n    case 'menu-dropdown':\n      {\n        return React.createElement(NavigationItem, __assign({\n          ref: ref,\n          startIcon: startIcon,\n          index: index\n        }, utility, {\n          testId: \"__\".concat(index)\n        }), label);\n      }\n  }\n}\n\nfunction dropdownComponentFactory(item, expandable, onItemClick) {\n  var label = item.text;\n  var hasIcon = !!item.iconName || !!item.iconUrl || !!item.iconAlt || !!item.iconSvg;\n  var startIcon = hasIcon && React.createElement(InternalIcon, {\n    name: item.iconName,\n    url: item.iconUrl,\n    alt: item.iconAlt,\n    svg: item.iconSvg\n  });\n\n  if (expandable) {\n    return React.createElement(ExpandableItem, __assign({}, item, {\n      onItemClick: onItemClick\n    }), label);\n  }\n\n  return React.createElement(LinkItem, {\n    startIcon: startIcon,\n    href: item.href,\n    external: item.external,\n    context: \"dropdown-menu\",\n    testId: item.id,\n    onFollow: function () {\n      return onItemClick(item);\n    }\n  }, label, item.external && React.createElement(React.Fragment, null, ' ', React.createElement(\"span\", {\n    \"aria-label\": item.externalIconAriaLabel,\n    role: item.externalIconAriaLabel ? 'img' : undefined\n  }, React.createElement(InternalIcon, {\n    name: \"external\",\n    size: \"normal\"\n  }))));\n}\n\nexport var UtilityMenuItem = forwardRef(function (_a, ref) {\n  var index = _a.index,\n      props = __rest(_a, [\"index\"]);\n\n  return React.createElement(\"li\", {\n    className: clsx(styles[\"overflow-menu-list-item\"], styles[\"overflow-menu-list-item-utility\"])\n  }, utilityComponentFactory(props, index, ref));\n});\nexport var SubmenuItem = function (props) {\n  var expandable = typeof props.items !== 'undefined';\n  return React.createElement(\"li\", {\n    className: clsx(styles[\"overflow-menu-list-item\"], styles[\"overflow-menu-list-item-submenu\"], expandable && styles[\"overflow-menu-list-item-expandable\"])\n  }, dropdownComponentFactory(props, expandable, props.onItemClick));\n};","map":{"version":3,"mappings":"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","names":["React","forwardRef","useState","clsx","fireCancelableEvent","isPlainLeftClick","useUniqueId","useFocusVisible","InternalIcon","useNavigate","styles","ListItem","_a","children","startIcon","endIcon","className","LinkItem","ref","external","href","onFollow","context","testId","focusVisible","rel","undefined","target","anchorProps","onClick","event","buttonProps","role","tabIndex","onKeyDown","key","preventDefault","onKeyUp","ButtonItem","NavigationItem","index","definition","navigate","name","headerText","text","title","headerSecondaryText","description","utilityIndex","ExpandableItem","onItemClick","expanded","setExpanded","headerId","value","icon","id","items","map","item","isGroup","dropdownComponentFactory","utilityComponentFactory","utility","label","hasIcon","iconName","iconUrl","iconAlt","iconSvg","url","alt","svg","type","handleClick","variant","externalIconAriaLabel","size","__assign","expandable","UtilityMenuItem","props","SubmenuItem"],"sourceRoot":"","sources":["../../../../../src/top-navigation/parts/overflow-menu/menu-item.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { forwardRef, useState } from 'react';\nimport clsx from 'clsx';\n\nimport { fireCancelableEvent, isPlainLeftClick } from '../../../internal/events';\nimport { useUniqueId } from '../../../internal/hooks/use-unique-id';\nimport useFocusVisible from '../../../internal/hooks/focus-visible';\n\nimport { LinkProps } from '../../../link/interfaces';\nimport { ButtonDropdownProps } from '../../../button-dropdown/interfaces';\nimport InternalIcon from '../../../icon/internal';\n\nimport { useNavigate } from './router';\nimport { TopNavigationProps } from '../../interfaces';\nimport styles from '../../styles.css.js';\n\ninterface ListItemProps {\n  startIcon?: React.ReactNode;\n  endIcon?: React.ReactNode;\n  context?: 'dropdown-menu';\n  children?: React.ReactNode;\n  testId?: string;\n}\n\nconst ListItem = ({ children, startIcon, endIcon }: ListItemProps) => {\n  return (\n    <>\n      {startIcon && <span className={styles['overflow-menu-list-item-icon']}>{startIcon}</span>}\n      <span className={styles['overflow-menu-list-item-text']}>{children}</span>\n      {endIcon && endIcon}\n    </>\n  );\n};\n\ninterface LinkItemProps extends ButtonItemProps, Pick<LinkProps, 'href' | 'external'> {}\n\nconst LinkItem = forwardRef(\n  (\n    { children, external, href, startIcon, endIcon, onFollow, context, testId }: LinkItemProps,\n    ref: React.Ref<HTMLAnchorElement>\n  ) => {\n    const focusVisible = useFocusVisible();\n    const rel = external ? 'noopener noreferrer' : undefined;\n    const target = external ? '_blank' : undefined;\n\n    const anchorProps = {\n      rel,\n      target,\n      href,\n      onClick(event: React.MouseEvent) {\n        if (isPlainLeftClick(event)) {\n          onFollow?.(event);\n        }\n      },\n    };\n\n    const buttonProps = {\n      role: 'button',\n      tabIndex: 0,\n      onKeyDown(event: React.KeyboardEvent) {\n        if (event.key === ' ') {\n          event.preventDefault();\n        }\n      },\n      onKeyUp(event: React.KeyboardEvent) {\n        if (event.key === ' ' || event.key === 'Enter') {\n          onFollow?.(event);\n        }\n      },\n      onClick: onFollow,\n    };\n\n    return (\n      <a\n        ref={ref}\n        className={clsx(\n          styles['overflow-menu-control'],\n          styles['overflow-menu-control-link'],\n          context && styles[`overflow-menu-control-${context}`]\n        )}\n        {...(typeof href === 'string' ? anchorProps : buttonProps)}\n        {...focusVisible}\n        {...(testId ? { 'data-testid': testId } : {})}\n      >\n        <ListItem startIcon={startIcon} endIcon={endIcon}>\n          {children}\n        </ListItem>\n      </a>\n    );\n  }\n);\n\ninterface ButtonItemProps extends ListItemProps {\n  onFollow?: (event: React.SyntheticEvent) => void;\n}\n\nconst ButtonItem = forwardRef(\n  (\n    { children, startIcon, endIcon, onFollow: onClick, testId }: ButtonItemProps & { testId?: string },\n    ref: React.Ref<HTMLButtonElement>\n  ) => {\n    const focusVisible = useFocusVisible();\n\n    return (\n      <button\n        ref={ref}\n        className={styles['overflow-menu-control']}\n        onClick={onClick}\n        {...focusVisible}\n        {...(typeof testId === 'string' ? { 'data-testid': testId } : {})}\n      >\n        <ListItem startIcon={startIcon} endIcon={endIcon}>\n          {children}\n        </ListItem>\n      </button>\n    );\n  }\n);\n\nconst NavigationItem = forwardRef(\n  (\n    {\n      startIcon,\n      children,\n      index,\n      testId,\n      ...definition\n    }: ButtonItemProps & TopNavigationProps.MenuDropdownUtility & { index: number; testId?: string },\n    ref: React.Ref<HTMLButtonElement>\n  ) => {\n    const navigate = useNavigate();\n    return (\n      <ButtonItem\n        ref={ref}\n        startIcon={startIcon}\n        endIcon={<InternalIcon name=\"angle-right\" />}\n        testId={testId}\n        onFollow={() =>\n          navigate('dropdown-menu', {\n            definition,\n            headerText: definition.text || definition.title,\n            headerSecondaryText: definition.description,\n            utilityIndex: index,\n          })\n        }\n      >\n        {children}\n      </ButtonItem>\n    );\n  }\n);\n\nconst ExpandableItem: React.FC<\n  ButtonItemProps & ButtonDropdownProps.ItemGroup & { onItemClick: (item: ButtonDropdownProps.Item) => void }\n> = ({ children, onItemClick, ...definition }) => {\n  const focusVisible = useFocusVisible();\n  const [expanded, setExpanded] = useState(false);\n  const headerId = useUniqueId('overflow-menu-item');\n\n  return (\n    <>\n      <button\n        className={clsx(styles['overflow-menu-control'], styles['overflow-menu-control-expandable-menu-trigger'])}\n        onClick={() => setExpanded(value => !value)}\n        aria-expanded={expanded}\n        {...focusVisible}\n      >\n        <ListItem\n          endIcon={\n            <span className={clsx(styles.icon, expanded && styles.expanded)}>\n              <InternalIcon name=\"caret-up-filled\" />\n            </span>\n          }\n        >\n          <span id={headerId}>{children}</span>\n        </ListItem>\n      </button>\n      {expanded && (\n        <ul\n          className={clsx(styles['overflow-menu-list'], styles['overflow-menu-list-submenu'])}\n          aria-labelledby={headerId}\n        >\n          {definition.items.map((item, index) => {\n            const isGroup = typeof (item as ButtonDropdownProps.ItemGroup).items !== 'undefined';\n\n            return (\n              <li\n                key={index}\n                className={clsx(styles[`overflow-menu-list-item`], styles[`overflow-menu-list-item-dropdown-menu`])}\n              >\n                {dropdownComponentFactory(item, isGroup, onItemClick)}\n              </li>\n            );\n          })}\n        </ul>\n      )}\n    </>\n  );\n};\n\nfunction utilityComponentFactory(\n  utility: TopNavigationProps.Utility,\n  index: number,\n  ref?: React.Ref<HTMLAnchorElement & HTMLButtonElement>\n) {\n  const label = utility.text || utility.title;\n  const hasIcon = !!utility.iconName || !!utility.iconUrl || !!utility.iconAlt || !!utility.iconSvg;\n  const startIcon = hasIcon && (\n    <InternalIcon name={utility.iconName} url={utility.iconUrl} alt={utility.iconAlt} svg={utility.iconSvg} />\n  );\n\n  switch (utility.type) {\n    case 'button': {\n      const handleClick = (event: Event | React.SyntheticEvent) => {\n        fireCancelableEvent(utility.onClick, {}, event);\n      };\n\n      if (utility.variant === 'primary-button') {\n        return (\n          <ButtonItem ref={ref} startIcon={startIcon} onFollow={handleClick} testId={`__${index}`}>\n            {label}\n          </ButtonItem>\n        );\n      }\n\n      return (\n        <LinkItem\n          ref={ref}\n          startIcon={startIcon}\n          href={utility.href}\n          external={utility.external}\n          testId={`__${index}`}\n          onFollow={handleClick}\n        >\n          {label}\n          {utility.external && (\n            <>\n              {' '}\n              <span aria-label={utility.externalIconAriaLabel} role={utility.externalIconAriaLabel ? 'img' : undefined}>\n                <InternalIcon name=\"external\" size=\"normal\" />\n              </span>\n            </>\n          )}\n        </LinkItem>\n      );\n    }\n    case 'menu-dropdown': {\n      return (\n        <NavigationItem\n          ref={ref}\n          startIcon={startIcon}\n          index={index}\n          {...(utility as TopNavigationProps.MenuDropdownUtility)}\n          testId={`__${index}`}\n        >\n          {label}\n        </NavigationItem>\n      );\n    }\n  }\n}\n\nfunction dropdownComponentFactory(\n  item: ButtonDropdownProps.ItemOrGroup,\n  expandable: boolean,\n  onItemClick: (item: ButtonDropdownProps.Item) => void\n) {\n  const label = item.text;\n  const hasIcon = !!item.iconName || !!item.iconUrl || !!item.iconAlt || !!item.iconSvg;\n  const startIcon = hasIcon && (\n    <InternalIcon name={item.iconName} url={item.iconUrl} alt={item.iconAlt} svg={item.iconSvg} />\n  );\n\n  if (expandable) {\n    return (\n      <ExpandableItem {...(item as ButtonDropdownProps.ItemGroup)} onItemClick={onItemClick}>\n        {label}\n      </ExpandableItem>\n    );\n  }\n\n  return (\n    <LinkItem\n      startIcon={startIcon}\n      href={item.href}\n      external={item.external}\n      context=\"dropdown-menu\"\n      testId={item.id}\n      onFollow={() => onItemClick(item as ButtonDropdownProps.Item)}\n    >\n      {label}\n      {item.external && (\n        <>\n          {' '}\n          <span aria-label={item.externalIconAriaLabel} role={item.externalIconAriaLabel ? 'img' : undefined}>\n            <InternalIcon name=\"external\" size=\"normal\" />\n          </span>\n        </>\n      )}\n    </LinkItem>\n  );\n}\n\ntype UtilityMenuItemProps = TopNavigationProps.Utility & { index: number };\n\nexport const UtilityMenuItem = forwardRef(\n  ({ index, ...props }: UtilityMenuItemProps, ref: React.Ref<HTMLAnchorElement & HTMLButtonElement>) => {\n    return (\n      <li className={clsx(styles[`overflow-menu-list-item`], styles[`overflow-menu-list-item-utility`])}>\n        {utilityComponentFactory(props, index, ref)}\n      </li>\n    );\n  }\n);\n\ntype SubmenuItemProps = ButtonDropdownProps.ItemOrGroup & { onItemClick: (item: ButtonDropdownProps.Item) => void };\n\nexport const SubmenuItem = (props: SubmenuItemProps) => {\n  const expandable = typeof (props as ButtonDropdownProps.ItemGroup).items !== 'undefined';\n\n  return (\n    <li\n      className={clsx(\n        styles[`overflow-menu-list-item`],\n        styles[`overflow-menu-list-item-submenu`],\n        expandable && styles[`overflow-menu-list-item-expandable`]\n      )}\n    >\n      {dropdownComponentFactory(props, expandable, props.onItemClick)}\n    </li>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}