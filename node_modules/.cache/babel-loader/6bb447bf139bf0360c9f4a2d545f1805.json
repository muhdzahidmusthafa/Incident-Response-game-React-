{"ast":null,"code":"import { __assign, __rest } from \"tslib\"; // Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport clsx from 'clsx';\nimport React, { useCallback, useRef } from 'react';\nimport { fireCancelableEvent, isPlainLeftClick } from '../internal/events';\nimport useFocusVisible from '../internal/hooks/focus-visible';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport styles from './styles.css.js';\nimport { LeftIcon, RightIcon } from './icon-helper';\nimport { checkSafeUrl } from '../internal/utils/check-safe-url';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nexport var InternalButton = React.forwardRef(function (_a, ref) {\n  var _b;\n\n  var children = _a.children,\n      iconName = _a.iconName,\n      __iconClass = _a.__iconClass,\n      onClick = _a.onClick,\n      onFollow = _a.onFollow,\n      _c = _a.iconAlign,\n      iconAlign = _c === void 0 ? 'left' : _c,\n      iconUrl = _a.iconUrl,\n      iconSvg = _a.iconSvg,\n      iconAlt = _a.iconAlt,\n      _d = _a.variant,\n      variant = _d === void 0 ? 'normal' : _d,\n      _e = _a.loading,\n      loading = _e === void 0 ? false : _e,\n      _f = _a.disabled,\n      disabled = _f === void 0 ? false : _f,\n      _g = _a.wrapText,\n      wrapText = _g === void 0 ? true : _g,\n      href = _a.href,\n      target = _a.target,\n      download = _a.download,\n      _h = _a.formAction,\n      formAction = _h === void 0 ? 'submit' : _h,\n      ariaLabel = _a.ariaLabel,\n      ariaExpanded = _a.ariaExpanded,\n      __nativeAttributes = _a.__nativeAttributes,\n      _j = _a.__internalRootRef,\n      __internalRootRef = _j === void 0 ? null : _j,\n      _k = _a.__activated,\n      __activated = _k === void 0 ? false : _k,\n      props = __rest(_a, [\"children\", \"iconName\", \"__iconClass\", \"onClick\", \"onFollow\", \"iconAlign\", \"iconUrl\", \"iconSvg\", \"iconAlt\", \"variant\", \"loading\", \"disabled\", \"wrapText\", \"href\", \"target\", \"download\", \"formAction\", \"ariaLabel\", \"ariaExpanded\", \"__nativeAttributes\", \"__internalRootRef\", \"__activated\"]);\n\n  checkSafeUrl('Button', href);\n  var focusVisible = useFocusVisible();\n  var isAnchor = Boolean(href);\n  var isDisabled = loading || disabled;\n  var shouldHaveContent = children && ['icon', 'inline-icon', 'flashbar-icon', 'modal-dismiss'].indexOf(variant) === -1;\n  var buttonRef = useRef(null);\n  useForwardFocus(ref, buttonRef);\n  var handleClick = useCallback(function (event) {\n    if (isAnchor && isDisabled) {\n      return event.preventDefault();\n    }\n\n    if (isAnchor && isPlainLeftClick(event)) {\n      fireCancelableEvent(onFollow, null, event);\n    }\n\n    var altKey = event.altKey,\n        button = event.button,\n        ctrlKey = event.ctrlKey,\n        metaKey = event.metaKey,\n        shiftKey = event.shiftKey;\n    fireCancelableEvent(onClick, {\n      altKey: altKey,\n      button: button,\n      ctrlKey: ctrlKey,\n      metaKey: metaKey,\n      shiftKey: shiftKey\n    }, event);\n  }, [isAnchor, isDisabled, onClick, onFollow]);\n  var buttonClass = clsx(props.className, styles.button, styles[\"variant-\".concat(variant)], (_b = {}, _b[styles.disabled] = isDisabled, _b[styles['button-no-wrap']] = !wrapText, _b[styles['button-no-text']] = !shouldHaveContent, _b[styles['is-activated']] = __activated, _b));\n\n  var buttonProps = __assign(__assign(__assign(__assign({}, props), focusVisible), __nativeAttributes), {\n    // https://github.com/microsoft/TypeScript/issues/36659\n    ref: useMergeRefs(buttonRef, __internalRootRef),\n    'aria-label': ariaLabel,\n    'aria-expanded': ariaExpanded,\n    className: buttonClass,\n    onClick: handleClick\n  });\n\n  var iconProps = {\n    loading: loading,\n    iconName: iconName,\n    iconAlign: iconAlign,\n    iconUrl: iconUrl,\n    iconSvg: iconSvg,\n    iconAlt: iconAlt,\n    variant: variant,\n    iconClass: __iconClass,\n    iconSize: variant === 'modal-dismiss' ? 'medium' : 'normal'\n  };\n  var buttonContent = React.createElement(React.Fragment, null, React.createElement(LeftIcon, __assign({}, iconProps)), shouldHaveContent && React.createElement(\"span\", {\n    className: styles.content\n  }, children), React.createElement(RightIcon, __assign({}, iconProps)));\n\n  if (isAnchor) {\n    return (// https://github.com/yannickcr/eslint-plugin-react/issues/2962\n      // eslint-disable-next-line react/jsx-no-target-blank\n      React.createElement(\"a\", __assign({}, buttonProps, {\n        href: href,\n        target: target,\n        // security recommendation: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#target\n        rel: target === '_blank' ? 'noopener noreferrer' : undefined,\n        tabIndex: isDisabled ? -1 : undefined,\n        \"aria-disabled\": isDisabled ? true : undefined,\n        download: download\n      }), buttonContent)\n    );\n  }\n\n  return React.createElement(\"button\", __assign({}, buttonProps, {\n    type: formAction === 'none' ? 'button' : 'submit',\n    disabled: isDisabled\n  }), buttonContent);\n});\nexport default InternalButton;","map":{"version":3,"mappings":"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","names":["clsx","React","useCallback","useRef","fireCancelableEvent","isPlainLeftClick","useFocusVisible","useForwardFocus","styles","LeftIcon","RightIcon","checkSafeUrl","useMergeRefs","InternalButton","forwardRef","_a","ref","iconName","__iconClass","onClick","onFollow","_c","iconAlign","iconUrl","iconSvg","iconAlt","_d","variant","_e","loading","_f","disabled","_g","wrapText","href","target","download","_h","formAction","ariaLabel","ariaExpanded","__nativeAttributes","_j","__internalRootRef","_k","__activated","props","focusVisible","isAnchor","Boolean","isDisabled","shouldHaveContent","children","indexOf","buttonRef","handleClick","event","preventDefault","button","ctrlKey","metaKey","shiftKey","altKey","buttonClass","className","_b","buttonProps","__assign","iconProps","iconClass","iconSize","buttonContent","content","rel","undefined","tabIndex","type"],"sourceRoot":"","sources":["../../../src/button/internal.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport clsx from 'clsx';\nimport React, { useCallback, useRef } from 'react';\nimport { fireCancelableEvent, isPlainLeftClick } from '../internal/events';\nimport useFocusVisible from '../internal/hooks/focus-visible';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport styles from './styles.css.js';\nimport { ButtonIconProps, LeftIcon, RightIcon } from './icon-helper';\nimport { ButtonProps } from './interfaces';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport { checkSafeUrl } from '../internal/utils/check-safe-url';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\n\ntype InternalButtonProps = Omit<ButtonProps, 'variant'> & {\n  variant?: ButtonProps['variant'] | 'flashbar-icon' | 'breadcrumb-group' | 'menu-trigger' | 'modal-dismiss';\n  __nativeAttributes?: Record<string, any>;\n  __iconClass?: string;\n  __activated?: boolean;\n} & InternalBaseComponentProps;\n\nexport const InternalButton = React.forwardRef(\n  (\n    {\n      children,\n      iconName,\n      __iconClass,\n      onClick,\n      onFollow,\n      iconAlign = 'left',\n      iconUrl,\n      iconSvg,\n      iconAlt,\n      variant = 'normal',\n      loading = false,\n      disabled = false,\n      wrapText = true,\n      href,\n      target,\n      download,\n      formAction = 'submit',\n      ariaLabel,\n      ariaExpanded,\n      __nativeAttributes,\n      __internalRootRef = null,\n      __activated = false,\n      ...props\n    }: InternalButtonProps,\n    ref: React.Ref<ButtonProps.Ref>\n  ) => {\n    checkSafeUrl('Button', href);\n    const focusVisible = useFocusVisible();\n    const isAnchor = Boolean(href);\n    const isDisabled = loading || disabled;\n    const shouldHaveContent =\n      children && ['icon', 'inline-icon', 'flashbar-icon', 'modal-dismiss'].indexOf(variant) === -1;\n\n    const buttonRef = useRef<HTMLElement>(null);\n    useForwardFocus(ref, buttonRef);\n\n    const handleClick = useCallback(\n      (event: React.MouseEvent) => {\n        if (isAnchor && isDisabled) {\n          return event.preventDefault();\n        }\n\n        if (isAnchor && isPlainLeftClick(event)) {\n          fireCancelableEvent(onFollow, null, event);\n        }\n\n        const { altKey, button, ctrlKey, metaKey, shiftKey } = event;\n        fireCancelableEvent(onClick, { altKey, button, ctrlKey, metaKey, shiftKey }, event);\n      },\n      [isAnchor, isDisabled, onClick, onFollow]\n    );\n\n    const buttonClass = clsx(props.className, styles.button, styles[`variant-${variant}`], {\n      [styles.disabled]: isDisabled,\n      [styles['button-no-wrap']]: !wrapText,\n      [styles['button-no-text']]: !shouldHaveContent,\n      [styles['is-activated']]: __activated,\n    });\n\n    const buttonProps = {\n      ...props,\n      ...focusVisible,\n      ...__nativeAttributes,\n      // https://github.com/microsoft/TypeScript/issues/36659\n      ref: useMergeRefs(buttonRef as any, __internalRootRef),\n      'aria-label': ariaLabel,\n      'aria-expanded': ariaExpanded,\n      className: buttonClass,\n      onClick: handleClick,\n    } as const;\n    const iconProps: ButtonIconProps = {\n      loading,\n      iconName,\n      iconAlign,\n      iconUrl,\n      iconSvg,\n      iconAlt,\n      variant,\n      iconClass: __iconClass,\n      iconSize: variant === 'modal-dismiss' ? 'medium' : 'normal',\n    };\n    const buttonContent = (\n      <>\n        <LeftIcon {...iconProps} />\n        {shouldHaveContent && <span className={styles.content}>{children}</span>}\n        <RightIcon {...iconProps} />\n      </>\n    );\n\n    if (isAnchor) {\n      return (\n        // https://github.com/yannickcr/eslint-plugin-react/issues/2962\n        // eslint-disable-next-line react/jsx-no-target-blank\n        <a\n          {...buttonProps}\n          href={href}\n          target={target}\n          // security recommendation: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#target\n          rel={target === '_blank' ? 'noopener noreferrer' : undefined}\n          tabIndex={isDisabled ? -1 : undefined}\n          aria-disabled={isDisabled ? true : undefined}\n          download={download}\n        >\n          {buttonContent}\n        </a>\n      );\n    }\n    return (\n      <button {...buttonProps} type={formAction === 'none' ? 'button' : 'submit'} disabled={isDisabled}>\n        {buttonContent}\n      </button>\n    );\n  }\n);\n\nexport default InternalButton;\n"]},"metadata":{},"sourceType":"module"}