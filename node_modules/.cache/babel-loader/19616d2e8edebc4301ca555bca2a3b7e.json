{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useRef } from 'react';\nimport { fireNonCancelableEvent } from '../../internal/events';\nexport var useLoadItems = function (_a) {\n  var onLoadItems = _a.onLoadItems,\n      options = _a.options,\n      statusType = _a.statusType;\n  var prevFilteringText = useRef(undefined);\n\n  var fireLoadItems = function (filteringText) {\n    if (prevFilteringText.current === filteringText) {\n      return;\n    }\n\n    prevFilteringText.current = filteringText;\n    fireNonCancelableEvent(onLoadItems, {\n      filteringText: filteringText,\n      firstPage: true,\n      samePage: false\n    });\n  };\n\n  var handleLoadMore = function () {\n    var firstPage = options.length === 0;\n    statusType === 'pending' && fireNonCancelableEvent(onLoadItems, {\n      firstPage: firstPage,\n      samePage: false,\n      filteringText: prevFilteringText.current || ''\n    });\n  };\n\n  var handleRecoveryClick = function () {\n    return fireNonCancelableEvent(onLoadItems, {\n      firstPage: false,\n      samePage: true,\n      filteringText: prevFilteringText.current || ''\n    });\n  };\n\n  return {\n    fireLoadItems: fireLoadItems,\n    handleLoadMore: handleLoadMore,\n    handleRecoveryClick: handleRecoveryClick\n  };\n};","map":{"version":3,"mappings":"AAAA;AACA;AACA,SAASA,MAAT,QAAuB,OAAvB;AACA,SAASC,sBAAT,QAAuC,uBAAvC;AAWA,OAAO,IAAMC,YAAY,GAAG,UAACC,EAAD,EAAwD;MAArDC,WAAW;MAAEC,OAAO;MAAEC,UAAU;EAC7D,IAAMC,iBAAiB,GAAGP,MAAM,CAAqBQ,SAArB,CAAhC;;EAEA,IAAMC,aAAa,GAAG,UAACC,aAAD,EAAsB;IAC1C,IAAIH,iBAAiB,CAACI,OAAlB,KAA8BD,aAAlC,EAAiD;MAC/C;IACD;;IACDH,iBAAiB,CAACI,OAAlB,GAA4BD,aAA5B;IACAT,sBAAsB,CAACG,WAAD,EAAc;MAAEM,aAAa,eAAf;MAAiBE,SAAS,EAAE,IAA5B;MAAkCC,QAAQ,EAAE;IAA5C,CAAd,CAAtB;EACD,CAND;;EAQA,IAAMC,cAAc,GAAG;IACrB,IAAMF,SAAS,GAAGP,OAAO,CAACU,MAAR,KAAmB,CAArC;IACAT,UAAU,KAAK,SAAf,IACEL,sBAAsB,CAACG,WAAD,EAAc;MAClCQ,SAAS,WADyB;MAElCC,QAAQ,EAAE,KAFwB;MAGlCH,aAAa,EAAEH,iBAAiB,CAACI,OAAlB,IAA6B;IAHV,CAAd,CADxB;EAMD,CARD;;EAUA,IAAMK,mBAAmB,GAAG;IAC1B,6BAAsB,CAACZ,WAAD,EAAc;MAClCQ,SAAS,EAAE,KADuB;MAElCC,QAAQ,EAAE,IAFwB;MAGlCH,aAAa,EAAEH,iBAAiB,CAACI,OAAlB,IAA6B;IAHV,CAAd,CAAtB;EAIE,CALJ;;EAOA,OAAO;IACLF,aAAa,eADR;IAELK,cAAc,gBAFT;IAGLE,mBAAmB;EAHd,CAAP;AAKD,CAjCM","names":["useRef","fireNonCancelableEvent","useLoadItems","_a","onLoadItems","options","statusType","prevFilteringText","undefined","fireLoadItems","filteringText","current","firstPage","samePage","handleLoadMore","length","handleRecoveryClick"],"sourceRoot":"","sources":["../../../../src/select/utils/use-load-items.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useRef } from 'react';\nimport { fireNonCancelableEvent } from '../../internal/events';\nimport { SelectProps } from '../interfaces';\nimport { OptionDefinition, OptionGroup } from '../../internal/components/option/interfaces';\nimport { DropdownStatusProps } from '../../internal/components/dropdown-status';\n\ninterface UseLoadItemsProps {\n  onLoadItems: SelectProps['onLoadItems'];\n  options: ReadonlyArray<OptionDefinition | OptionGroup>;\n  statusType: DropdownStatusProps.StatusType;\n}\n\nexport const useLoadItems = ({ onLoadItems, options, statusType }: UseLoadItemsProps) => {\n  const prevFilteringText = useRef<string | undefined>(undefined);\n\n  const fireLoadItems = (filteringText: string) => {\n    if (prevFilteringText.current === filteringText) {\n      return;\n    }\n    prevFilteringText.current = filteringText;\n    fireNonCancelableEvent(onLoadItems, { filteringText, firstPage: true, samePage: false });\n  };\n\n  const handleLoadMore = () => {\n    const firstPage = options.length === 0;\n    statusType === 'pending' &&\n      fireNonCancelableEvent(onLoadItems, {\n        firstPage,\n        samePage: false,\n        filteringText: prevFilteringText.current || '',\n      });\n  };\n\n  const handleRecoveryClick = () =>\n    fireNonCancelableEvent(onLoadItems, {\n      firstPage: false,\n      samePage: true,\n      filteringText: prevFilteringText.current || '',\n    });\n\n  return {\n    fireLoadItems,\n    handleLoadMore,\n    handleRecoveryClick,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}