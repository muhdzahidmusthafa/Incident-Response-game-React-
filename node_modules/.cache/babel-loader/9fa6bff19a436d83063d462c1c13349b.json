{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useState } from 'react';\nimport { ALWAYS_VISUAL_REFRESH } from '../../environment';\nimport { isMotionDisabled } from '../../motion';\nimport { findUpUntil } from '../../utils/dom';\nimport { useMutationObserver } from '../use-mutation-observer';\nexport function useCurrentMode(elementRef) {\n  var _a = useState('light'),\n      value = _a[0],\n      setValue = _a[1];\n\n  useMutationObserver(elementRef, function (node) {\n    var darkModeParent = findUpUntil(node, function (node) {\n      return node.classList.contains('awsui-polaris-dark-mode') || node.classList.contains('awsui-dark-mode');\n    });\n    setValue(darkModeParent ? 'dark' : 'light');\n  });\n  return value;\n}\nexport function useDensityMode(elementRef) {\n  var _a = useState('comfortable'),\n      value = _a[0],\n      setValue = _a[1];\n\n  useMutationObserver(elementRef, function (node) {\n    var compactModeParent = findUpUntil(node, function (node) {\n      return node.classList.contains('awsui-polaris-compact-mode') || node.classList.contains('awsui-compact-mode');\n    });\n    setValue(compactModeParent ? 'compact' : 'comfortable');\n  });\n  return value;\n}\nexport function useVisualRefresh(elementRef) {\n  var _a = useState(Boolean(ALWAYS_VISUAL_REFRESH)),\n      value = _a[0],\n      setValue = _a[1];\n\n  useMutationObserver(elementRef, function (node) {\n    var _a, _b;\n\n    var supportsCSSVariables = (_b = (_a = window.CSS) === null || _a === void 0 ? void 0 : _a.supports) === null || _b === void 0 ? void 0 : _b.call(_a, 'color', 'var(--test-var)');\n\n    if (!supportsCSSVariables || ALWAYS_VISUAL_REFRESH) {\n      return;\n    }\n\n    var visualRefreshParent = findUpUntil(node, function (node) {\n      return node.classList.contains('awsui-visual-refresh');\n    });\n    setValue(!!visualRefreshParent);\n  });\n  return value;\n}\nexport function useReducedMotion(elementRef) {\n  var _a = useState(false),\n      value = _a[0],\n      setValue = _a[1];\n\n  useMutationObserver(elementRef, function (node) {\n    setValue(isMotionDisabled(node));\n  });\n  return value;\n}","map":{"version":3,"mappings":"AAAA;AACA;AACA,SAAgBA,QAAhB,QAAgC,OAAhC;AACA,SAASC,qBAAT,QAAsC,mBAAtC;AACA,SAASC,gBAAT,QAAiC,cAAjC;AACA,SAASC,WAAT,QAA4B,iBAA5B;AACA,SAASC,mBAAT,QAAoC,0BAApC;AAEA,OAAM,SAAUC,cAAV,CAAyBC,UAAzB,EAAiE;EAC/D,SAAoBN,QAAQ,CAAmB,OAAnB,CAA5B;EAAA,IAACO,KAAK,QAAN;EAAA,IAAQC,QAAQ,QAAhB;;EACNJ,mBAAmB,CAACE,UAAD,EAAa,gBAAI;IAClC,IAAMG,cAAc,GAAGN,WAAW,CAChCO,IADgC,EAEhC,gBAAI;MAAI,WAAI,CAACC,SAAL,CAAeC,QAAf,CAAwB,yBAAxB,KAAsDF,IAAI,CAACC,SAAL,CAAeC,QAAf,CAAwB,iBAAxB,CAAtD;IAAgG,CAFxE,CAAlC;IAIAJ,QAAQ,CAACC,cAAc,GAAG,MAAH,GAAY,OAA3B,CAAR;EACD,CANkB,CAAnB;EAOA,OAAOF,KAAP;AACD;AAED,OAAM,SAAUM,cAAV,CAAyBP,UAAzB,EAAiE;EAC/D,SAAoBN,QAAQ,CAA4B,aAA5B,CAA5B;EAAA,IAACO,KAAK,QAAN;EAAA,IAAQC,QAAQ,QAAhB;;EACNJ,mBAAmB,CAACE,UAAD,EAAa,gBAAI;IAClC,IAAMQ,iBAAiB,GAAGX,WAAW,CACnCO,IADmC,EAEnC,gBAAI;MAAI,WAAI,CAACC,SAAL,CAAeC,QAAf,CAAwB,4BAAxB,KAAyDF,IAAI,CAACC,SAAL,CAAeC,QAAf,CAAwB,oBAAxB,CAAzD;IAAsG,CAF3E,CAArC;IAIAJ,QAAQ,CAACM,iBAAiB,GAAG,SAAH,GAAe,aAAjC,CAAR;EACD,CANkB,CAAnB;EAOA,OAAOP,KAAP;AACD;AAED,OAAM,SAAUQ,gBAAV,CAA2BT,UAA3B,EAAmE;EACjE,SAAoBN,QAAQ,CAACgB,OAAO,CAACf,qBAAD,CAAR,CAA5B;EAAA,IAACM,KAAK,QAAN;EAAA,IAAQC,QAAQ,QAAhB;;EACNJ,mBAAmB,CAACE,UAAD,EAAa,gBAAI;;;IAClC,IAAMW,oBAAoB,GAAG,kBAAM,CAACC,GAAP,MAAU,IAAV,IAAUC,aAAV,GAAU,MAAV,GAAUA,GAAEC,QAAZ,MAAoB,IAApB,IAAoBC,aAApB,GAAoB,MAApB,GAAoBA,YAAG,OAAH,EAAY,iBAAZ,CAAjD;;IACA,IAAI,CAACJ,oBAAD,IAAyBhB,qBAA7B,EAAoD;MAClD;IACD;;IACD,IAAMqB,mBAAmB,GAAGnB,WAAW,CAACO,IAAD,EAAO,gBAAI;MAAI,WAAI,CAACC,SAAL,CAAeC,QAAf,CAAwB,sBAAxB;IAA+C,CAA9D,CAAvC;IACAJ,QAAQ,CAAC,CAAC,CAACc,mBAAH,CAAR;EACD,CAPkB,CAAnB;EAQA,OAAOf,KAAP;AACD;AAED,OAAM,SAAUgB,gBAAV,CAA2BjB,UAA3B,EAAmE;EACjE,SAAoBN,QAAQ,CAAC,KAAD,CAA5B;EAAA,IAACO,KAAK,QAAN;EAAA,IAAQC,QAAQ,QAAhB;;EACNJ,mBAAmB,CAACE,UAAD,EAAa,gBAAI;IAClCE,QAAQ,CAACN,gBAAgB,CAACQ,IAAD,CAAjB,CAAR;EACD,CAFkB,CAAnB;EAGA,OAAOH,KAAP;AACD","names":["useState","ALWAYS_VISUAL_REFRESH","isMotionDisabled","findUpUntil","useMutationObserver","useCurrentMode","elementRef","value","setValue","darkModeParent","node","classList","contains","useDensityMode","compactModeParent","useVisualRefresh","Boolean","supportsCSSVariables","CSS","_a","supports","_b","visualRefreshParent","useReducedMotion"],"sourceRoot":"","sources":["../../../../../src/internal/hooks/use-visual-mode/index.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useState } from 'react';\nimport { ALWAYS_VISUAL_REFRESH } from '../../environment';\nimport { isMotionDisabled } from '../../motion';\nimport { findUpUntil } from '../../utils/dom';\nimport { useMutationObserver } from '../use-mutation-observer';\n\nexport function useCurrentMode(elementRef: React.RefObject<HTMLElement>) {\n  const [value, setValue] = useState<'light' | 'dark'>('light');\n  useMutationObserver(elementRef, node => {\n    const darkModeParent = findUpUntil(\n      node,\n      node => node.classList.contains('awsui-polaris-dark-mode') || node.classList.contains('awsui-dark-mode')\n    );\n    setValue(darkModeParent ? 'dark' : 'light');\n  });\n  return value;\n}\n\nexport function useDensityMode(elementRef: React.RefObject<HTMLElement>) {\n  const [value, setValue] = useState<'comfortable' | 'compact'>('comfortable');\n  useMutationObserver(elementRef, node => {\n    const compactModeParent = findUpUntil(\n      node,\n      node => node.classList.contains('awsui-polaris-compact-mode') || node.classList.contains('awsui-compact-mode')\n    );\n    setValue(compactModeParent ? 'compact' : 'comfortable');\n  });\n  return value;\n}\n\nexport function useVisualRefresh(elementRef: React.RefObject<HTMLElement>) {\n  const [value, setValue] = useState(Boolean(ALWAYS_VISUAL_REFRESH));\n  useMutationObserver(elementRef, node => {\n    const supportsCSSVariables = window.CSS?.supports?.('color', 'var(--test-var)');\n    if (!supportsCSSVariables || ALWAYS_VISUAL_REFRESH) {\n      return;\n    }\n    const visualRefreshParent = findUpUntil(node, node => node.classList.contains('awsui-visual-refresh'));\n    setValue(!!visualRefreshParent);\n  });\n  return value;\n}\n\nexport function useReducedMotion(elementRef: React.RefObject<HTMLElement>) {\n  const [value, setValue] = useState(false);\n  useMutationObserver(elementRef, node => {\n    setValue(isMotionDisabled(node));\n  });\n  return value;\n}\n"]},"metadata":{},"sourceType":"module"}