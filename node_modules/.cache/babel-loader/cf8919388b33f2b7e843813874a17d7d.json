{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect } from 'react';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { useDebounceCallback } from '../internal/hooks/use-debounce-callback';\nimport { useStableEventHandler } from '../internal/hooks/use-stable-event-handler';\nexport function useChangeEffect(editor, onChange, onDelayedChange) {\n  var debouncedChangeHandler = useDebounceCallback(function (detail) {\n    fireNonCancelableEvent(onDelayedChange, detail);\n  }, 0);\n  var handleChange = useStableEventHandler(function () {\n    var changeDetail = {\n      value: (editor === null || editor === void 0 ? void 0 : editor.getValue()) || ''\n    };\n    fireNonCancelableEvent(onChange, changeDetail);\n    debouncedChangeHandler(changeDetail);\n  });\n  useEffect(function () {\n    if (!editor) {\n      return;\n    }\n\n    editor.on('change', handleChange);\n    return function () {\n      return editor.off('change', handleChange);\n    };\n  }, [editor, handleChange]);\n}","map":{"version":3,"mappings":"AAAA;AACA;AACA,SAASA,SAAT,QAA0B,OAA1B;AAGA,SAASC,sBAAT,QAAkE,oBAAlE;AACA,SAASC,mBAAT,QAAoC,yCAApC;AACA,SAASC,qBAAT,QAAsC,4CAAtC;AAEA,OAAM,SAAUC,eAAV,CACJC,MADI,EAEJC,QAFI,EAGJC,eAHI,EAGqE;EAEzE,IAAMC,sBAAsB,GAAGN,mBAAmB,CAAC,UAACO,MAAD,EAAqC;IACtFR,sBAAsB,CAACM,eAAD,EAAkBE,MAAlB,CAAtB;EACD,CAFiD,EAE/C,CAF+C,CAAlD;EAGA,IAAMC,YAAY,GAAGP,qBAAqB,CAAC;IACzC,IAAMQ,YAAY,GAAG;MAAEC,KAAK,EAAE,OAAM,SAAN,UAAM,WAAN,GAAM,MAAN,SAAM,CAAEC,QAAR,OAAsB;IAA/B,CAArB;IACAZ,sBAAsB,CAACK,QAAD,EAAWK,YAAX,CAAtB;IACAH,sBAAsB,CAACG,YAAD,CAAtB;EACD,CAJyC,CAA1C;EAKAX,SAAS,CAAC;IACR,IAAI,CAACK,MAAL,EAAa;MACX;IACD;;IAEDA,MAAM,CAACS,EAAP,CAAU,QAAV,EAAoBJ,YAApB;IACA,OAAO;MAAM,aAAM,CAACK,GAAP,CAAW,QAAX,EAAqBL,YAArB;IAAkC,CAA/C;EACD,CAPQ,EAON,CAACL,MAAD,EAASK,YAAT,CAPM,CAAT;AAQD","names":["useEffect","fireNonCancelableEvent","useDebounceCallback","useStableEventHandler","useChangeEffect","editor","onChange","onDelayedChange","debouncedChangeHandler","detail","handleChange","changeDetail","value","getValue","on","off"],"sourceRoot":"","sources":["../../../src/code-editor/listeners.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect } from 'react';\nimport { Ace } from 'ace-builds';\nimport { CodeEditorProps } from './interfaces';\nimport { fireNonCancelableEvent, NonCancelableEventHandler } from '../internal/events';\nimport { useDebounceCallback } from '../internal/hooks/use-debounce-callback';\nimport { useStableEventHandler } from '../internal/hooks/use-stable-event-handler';\n\nexport function useChangeEffect(\n  editor?: Ace.Editor,\n  onChange?: NonCancelableEventHandler<CodeEditorProps.ChangeDetail>,\n  onDelayedChange?: NonCancelableEventHandler<CodeEditorProps.ChangeDetail>\n) {\n  const debouncedChangeHandler = useDebounceCallback((detail: CodeEditorProps.ChangeDetail) => {\n    fireNonCancelableEvent(onDelayedChange, detail);\n  }, 0);\n  const handleChange = useStableEventHandler(() => {\n    const changeDetail = { value: editor?.getValue() || '' };\n    fireNonCancelableEvent(onChange, changeDetail);\n    debouncedChangeHandler(changeDetail);\n  });\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    editor.on('change', handleChange);\n    return () => editor.off('change', handleChange);\n  }, [editor, handleChange]);\n}\n"]},"metadata":{},"sourceType":"module"}