{"ast":null,"code":"var searchableFields = ['value', 'label', 'description', 'labelTag'];\nexport var matchesString = function (value, searchText, strictMatching) {\n  if (!value) {\n    return false;\n  }\n\n  var index = value.toLowerCase().indexOf(searchText);\n  return strictMatching ? index === 0 : index > -1;\n};\n\nvar matchesSingleOption = function (dropdownOption, text, strictMatching) {\n  var searchText = text.toLowerCase();\n  var option = dropdownOption.option;\n\n  var searchStrFields = function (attr) {\n    return matchesString(option[attr], searchText, strictMatching);\n  };\n\n  var searchTagsFields = function (attr) {\n    var _a;\n\n    return (_a = option[attr]) === null || _a === void 0 ? void 0 : _a.some(function (value) {\n      return matchesString(value, searchText, strictMatching);\n    });\n  };\n\n  var searchableTagFields = ['tags'];\n\n  if (!strictMatching) {\n    searchableTagFields.push('filteringTags');\n  }\n\n  return searchableFields.some(searchStrFields) || searchableTagFields.some(searchTagsFields);\n};\n\nexport var filterOptions = function (options, searchText, strictMatching) {\n  if (strictMatching === void 0) {\n    strictMatching = false;\n  }\n\n  if (searchText === '') {\n    return options;\n  }\n\n  var currentGroup = null;\n  var parentMatched = false;\n  return options.reduce(function (acc, option) {\n    if (option.type === 'parent') {\n      parentMatched = false;\n      currentGroup = option;\n\n      if (matchesSingleOption(option, searchText, strictMatching)) {\n        parentMatched = true;\n        acc.push(currentGroup);\n      }\n\n      return acc;\n    }\n\n    if (option.type !== 'child') {\n      currentGroup = null;\n      parentMatched = false;\n    }\n\n    if (parentMatched) {\n      acc.push(option);\n    } else if (matchesSingleOption(option, searchText, strictMatching)) {\n      if (currentGroup) {\n        acc.push(currentGroup);\n        currentGroup = null;\n      }\n\n      acc.push(option);\n    }\n\n    return acc;\n  }, []);\n};\nexport var isInteractive = function (option) {\n  return !!option && !option.disabled && option.type !== 'parent';\n};\nexport var isGroupInteractive = function (option) {\n  return !!option && !option.disabled;\n};\nexport var isGroup = function (option) {\n  return !!option && 'options' in option;\n};","map":{"version":3,"mappings":"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","names":["searchableFields","matchesString","value","searchText","strictMatching","index","toLowerCase","indexOf","matchesSingleOption","dropdownOption","text","option","searchStrFields","attr","searchTagsFields","_a","some","searchableTagFields","push","filterOptions","options","currentGroup","parentMatched","reduce","acc","type","isInteractive","disabled","isGroupInteractive","isGroup"],"sourceRoot":"","sources":["../../../../../../src/internal/components/option/utils/filter-options.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { DropdownOption, OptionDefinition, OptionGroup } from '../interfaces';\n\ntype SearchableField = 'value' | 'label' | 'description' | 'labelTag';\ntype SearchableTagField = 'tags' | 'filteringTags';\n\nconst searchableFields: SearchableField[] = ['value', 'label', 'description', 'labelTag'];\n\nexport const matchesString = (value: string | undefined, searchText: string, strictMatching: boolean): boolean => {\n  if (!value) {\n    return false;\n  }\n  const index = value.toLowerCase().indexOf(searchText);\n  return strictMatching ? index === 0 : index > -1;\n};\n\nconst matchesSingleOption = (dropdownOption: DropdownOption, text: string, strictMatching: boolean): boolean => {\n  const searchText = text.toLowerCase();\n\n  const option: OptionDefinition = dropdownOption.option;\n  const searchStrFields = (attr: SearchableField) => matchesString(option[attr], searchText, strictMatching);\n  const searchTagsFields = (attr: SearchableTagField) =>\n    option[attr]?.some(value => matchesString(value, searchText, strictMatching));\n\n  const searchableTagFields: SearchableTagField[] = ['tags'];\n  if (!strictMatching) {\n    searchableTagFields.push('filteringTags');\n  }\n\n  return searchableFields.some(searchStrFields) || searchableTagFields.some(searchTagsFields);\n};\n\nexport const filterOptions = (\n  options: ReadonlyArray<DropdownOption>,\n  searchText: string,\n  strictMatching = false\n): ReadonlyArray<DropdownOption> => {\n  if (searchText === '') {\n    return options;\n  }\n\n  let currentGroup: DropdownOption | null = null;\n  let parentMatched = false;\n  return options.reduce<DropdownOption[]>((acc, option) => {\n    if (option.type === 'parent') {\n      parentMatched = false;\n      currentGroup = option;\n      if (matchesSingleOption(option, searchText, strictMatching)) {\n        parentMatched = true;\n        acc.push(currentGroup);\n      }\n      return acc;\n    }\n    if (option.type !== 'child') {\n      currentGroup = null;\n      parentMatched = false;\n    }\n    if (parentMatched) {\n      acc.push(option);\n    } else if (matchesSingleOption(option, searchText, strictMatching)) {\n      if (currentGroup) {\n        acc.push(currentGroup);\n        currentGroup = null;\n      }\n      acc.push(option);\n    }\n    return acc;\n  }, []);\n};\n\nexport const isInteractive = (option?: DropdownOption) => !!option && !option.disabled && option.type !== 'parent';\n\nexport const isGroupInteractive = (option?: DropdownOption) => !!option && !option.disabled;\n\nexport const isGroup = (option?: OptionDefinition | OptionGroup): option is OptionGroup =>\n  !!option && 'options' in option;\n"]},"metadata":{},"sourceType":"module"}